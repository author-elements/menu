{"version":3,"file":"author-selected-options.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectedOptionsElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      contentsElement: {\n        readonly: true,\n        private: true,\n        default: this.shadowRoot.getElementById('contents')\n      },\n\n      options: {\n        private: true,\n        default: []\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      appendCaret: () => {\n        let xmlns = 'http://www.w3.org/2000/svg'\n        let width = 24\n        let height = 24\n\n        let caret = document.createElementNS(xmlns, 'svg')\n        caret.slot = 'beforeend'\n        caret.setAttributeNS(null, 'width', width)\n        caret.setAttributeNS(null, 'height', height)\n        caret.setAttributeNS(null, 'viewBox', `0 0 ${width} ${height}`)\n        caret.setAttributeNS(null, 'fill', 'none')\n        caret.setAttributeNS(null, 'stroke', 'currentColor')\n        caret.setAttributeNS(null, 'stroke-width', '3')\n        caret.setAttributeNS(null, 'stroke-linecap', 'square')\n        caret.setAttributeNS(null, 'stroke-linejoin', 'miter')\n\n        let shape = document.createElementNS(xmlns, 'polyline')\n        shape.setAttributeNS(null, 'points', '6 9 12 15 18 9')\n\n        caret.appendChild(shape)\n        this.appendChild(caret)\n      },\n\n      optionSelectionHandler: evt => {\n        evt.stopPropagation()\n\n        this.clear(evt.detail.length === 0)\n        evt.detail.forEach((option, index) => this.add(option, index === evt.detail.length - 1))\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            if (!value) {\n              return this.on('mousedown', this.PRIVATE.mousedownHandler)\n            }\n\n            return this.off('mousedown', this.PRIVATE.mousedownHandler)\n\n          default: return\n        }\n      },\n\n      mousedownHandler: evt => this.emit('toggle', null, this.parentNode)\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.PRIVATE.appendCaret()\n        this.update()\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      disconnected: () => {\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mousedown: this.PRIVATE.mousedownHandler,\n      'options.selected': this.PRIVATE.optionSelectionHandler\n    })\n  }\n\n  get list () {\n    return this.PRIVATE.options.map(option => option.displayElement.text).join(', ')\n  }\n\n  add (option, update = true) {\n    this.PRIVATE.options.push(option)\n    update && this.update()\n  }\n\n  clear (update = true) {\n    this.PRIVATE.options = []\n    update && this.update()\n  }\n\n  remove (option, update = true) {\n    this.PRIVATE.options.splice(this.PRIVATE.options.indexOf(option), 1)\n    update && this.update()\n  }\n\n  update (options = this.PRIVATE.options) {\n    if (options !== this.PRIVATE.options) {\n      this.PRIVATE.options = options\n    }\n\n    this.PRIVATE.contentsElement.innerHTML = options.length > 0\n      ? this.list\n      : this.parentNode.placeholder || ''\n  }\n}\n\ncustomElements.define('author-selected-options', AuthorSelectedOptionsElement)\n\nexport default AuthorSelectedOptionsElement\n"],"names":[],"mappings":"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"}