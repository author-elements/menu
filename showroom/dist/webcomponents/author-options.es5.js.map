{"version":3,"file":"author-options.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorOptionsElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      cherryPickedOptions: {\n        private: true\n      },\n\n      form: {\n        readonly: true,\n        get: () => this.parentNode.form\n      },\n\n      displayOptions: {\n        readonly: true,\n        get: () => {\n          let AuthorHTMLOptionsCollection = this.PRIVATE.generateAuthorHTMLOptionsCollectionConstructor()\n          let array = this.options.map(option => option.displayElement)\n          let addFunction = (element, before) => this.addOption(this.PRIVATE.generateOptionObject(element), before)\n          let removeFunction = index => this.removeOptionByIndex(index)\n          return new AuthorHTMLOptionsCollection(array, this.selectedIndex, addFunction, removeFunction)\n        }\n      },\n\n      hoveredIndex: {\n        readonly: true,\n        get: () => this.options.findIndex(option => option.displayElement.hover)\n      },\n\n      isSlave: {\n        private: true,\n        readonly: true,\n        get: () => this.parentNode.localName === 'author-select' || this.parentNode.localName === 'author-datalist'\n      },\n\n      lastSelectedIndex: {\n        private: true\n      },\n\n      multiple: {\n        readonly: true,\n        get: () => this.parentNode.multiple\n      },\n\n      options: {\n        readonly: true,\n        default: []\n      },\n\n      selectedIndices: {\n        readonly: true,\n        get: () => [...this.selectedOptions].map(option => option.index)\n      },\n\n      selectedOptions: {\n        readonly: true,\n        get: () => {\n          let nodes = this.querySelectorAll('[selected]')\n          let AuthorHTMLCollection = this.PRIVATE.generateAuthorHTMLCollectionConstructor()\n          return new AuthorHTMLCollection(nodes)\n        }\n      },\n\n      Selection: {\n        readonly: true,\n        private: true,\n        default: class {\n          constructor (options = []) {\n            this.options = options\n          }\n\n          get displayElements () {\n            return this.options.map(option => option.displayElement)\n          }\n\n          get length () {\n            return this.options.length\n          }\n\n          get first () {\n            return this.options[0]\n          }\n\n          get last () {\n            return this.options[this.options.length - 1]\n          }\n\n          append (option) {\n            this.options.push(option)\n          }\n\n          clear () {\n            this.options = []\n          }\n\n          includes (option) {\n            return this.options.includes(option)\n          }\n\n          prepend (option) {\n            this.options.unshift(option)\n          }\n\n          selectAll () {\n            this.options.forEach(option => option.selected = true)\n          }\n        }\n      },\n\n      selectionStartIndex: {\n        private: true\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      arrowDownHandler: evt => {\n        if (!this.multiple) {\n          let { startIndex } = evt.detail\n\n          switch (startIndex) {\n            case this.options.length - 1:\n              return\n\n            default:\n              return this.hoverOption(startIndex + 1)\n          }\n\n          return\n        }\n\n        let { lastSelectedIndex } = this.PRIVATE\n\n        if (lastSelectedIndex === this.options.length - 1) {\n          return\n        }\n\n        return this.emit('option.selected', {\n          index: lastSelectedIndex === null ? 0 : lastSelectedIndex + 1,\n          keyboard: true,\n          shiftKey: evt.detail.shiftKey,\n          ctrlKey: false,\n          metaKey: false\n        })\n      },\n\n      arrowUpHandler: evt => {\n        if (!this.multiple) {\n          let { startIndex } = evt.detail\n\n          switch (startIndex) {\n            case -1:\n            case 0:\n              return\n\n            default:\n              return this.hoverOption(startIndex - 1)\n          }\n\n          return\n        }\n\n        let { lastSelectedIndex } = this.PRIVATE\n\n        if (lastSelectedIndex === 0) {\n          return\n        }\n\n        return this.emit('option.selected', {\n          index: lastSelectedIndex === null ? this.options.length - 1 : lastSelectedIndex - 1,\n          keyboard: true,\n          shiftKey: evt.detail.shiftKey,\n          ctrlKey: false,\n          metaKey: false\n        })\n      },\n\n      diffSelections: (comparator, comparable) => {\n        return comparator.filter(option => !comparable.includes(option))\n      },\n\n      generateAuthorHTMLOptionsCollectionConstructor: () => {\n        let _p = new WeakMap()\n\n        let AuthorHTMLCollection = this.PRIVATE.generateAuthorHTMLCollectionConstructor()\n\n        let AuthorHTMLOptionsCollection = class AuthorHTMLOptionsCollection extends AuthorHTMLCollection {\n          constructor (arr, selectedIndex = -1, add, remove) {\n            super(arr)\n            this.selectedIndex = selectedIndex\n            this.add = add\n            this.remove = remove\n\n            _p.set(this, {arr})\n          }\n\n          [Symbol.toStringTag] () {\n            return 'AuthorHTMLOptionsCollection'\n          }\n        }\n\n        return AuthorHTMLOptionsCollection\n      },\n\n      generateOptgroup: optgroup => {\n        if (!customElements.get('author-optgroup')) {\n          return this.UTIL.throwError({\n            type: 'dependency',\n            vars: { name: 'author-optgroup' }\n          })\n        }\n\n        let surrogate = document.createElement('author-optgroup')\n        surrogate.id = this.UTIL.generateGuid('optgroup')\n\n        let label = optgroup.getAttribute('label')\n\n        if (!label || label.trim() === '') {\n          return this.UTIL.throwError({\n            message: '<optgroup> must have a label attribute!'\n          })\n        }\n\n        surrogate.setAttribute('label', label)\n\n        let options = optgroup.querySelectorAll('option')\n        Array.from(options).forEach(option => {\n          this.addOption(this.PRIVATE.generateOptionObject(option), null, surrogate)\n        })\n\n        return surrogate\n      },\n\n      generateOptionObject: sourceElement => {\n        if (!customElements.get('author-option')) {\n          return this.UTIL.throwError({\n            type: 'dependency',\n            vars: { name: 'author-option' }\n          })\n        }\n\n        let OptionConstructor = this.PRIVATE.generateOptionConstructor()\n        return new OptionConstructor(this, this.UTIL.generateGuid(), sourceElement, document.createElement('author-option'))\n      },\n\n      generateOptionConstructor: () => {\n        let _p = new WeakMap()\n\n        return class AuthorOptionObject {\n          constructor (parent, key, sourceElement, displayElement) {\n            this.key = key\n            this.form = parent.form\n            this.defaultSelected = sourceElement.selected\n\n            this.sourceElement = sourceElement\n            this.displayElement = displayElement\n            this.displayElement.parent = parent\n            this.displayElement.selected = sourceElement.selected\n            this.displayElement.defaultSelected = sourceElement.selected\n            this.displayElement.innerHTML = sourceElement.innerHTML\n\n            // Add additional attributes\n            Array.from(sourceElement.attributes).forEach(attr => {\n              if (typeof attr.value === 'boolean') {\n                return attr.value ? this.displayElement.setAttribute(attr.name, '') : this.displayElement.removeAttribute(attr.name)\n              }\n\n              this.displayElement.setAttribute(attr.name, attr.value)\n            })\n\n            _p.set(this, {\n              attributes: {\n                disabled: sourceElement.disabled,\n                id: sourceElement.getAttribute('id'),\n                label: sourceElement.getAttribute('label') || sourceElement.textContent.trim(),\n                selected: sourceElement.selected,\n                value: sourceElement.hasAttribute('value') ? sourceElement.getAttribute('value').trim() : null,\n                text: sourceElement.text.trim()\n              }\n            })\n          }\n\n          get disabled () {\n            return _p.get(this).attributes.disabled\n          }\n\n          set disabled (bool) {\n            this.setAttr('disabled', bool)\n          }\n\n          get index () {\n            return this.sourceElement.index\n          }\n\n          get id () {\n            return _p.get(this).attributes.id\n          }\n\n          set id (id) {\n            this.setAttr('id', id)\n          }\n\n          get selected () {\n            return _p.get(this).attributes.selected\n          }\n\n          set selected (bool) {\n            this.setAttr('selected', bool)\n          }\n\n          get label () {\n            return _p.get(this).attributes.label\n          }\n\n          set label (label) {\n            this.setAttr('label', label)\n          }\n\n          get text () {\n            return _p.get(this).attributes.text\n          }\n\n          set text (text) {\n            this.setAttr('text', text)\n          }\n\n          get value () {\n            return _p.get(this).attributes.value\n          }\n\n          set value (value) {\n            this.setAttr('value', value)\n          }\n\n          remove () {\n            this.sourceElement.remove()\n            this.displayElement.remove()\n          }\n\n          setAttr (name, value) {\n            this.sourceElement[name] = value\n\n            if (typeof value === 'boolean') {\n              value ? this.displayElement.setAttribute(name, '') : this.displayElement.removeAttribute(name)\n            } else {\n              this.displayElement.setAttribute(name, value)\n            }\n\n            _p.get(this).attributes[name] = value\n          }\n        }\n      },\n\n      getCurrentSelection: () => this.options.filter(option => option.selected),\n\n      handleClickSelection: (detail, cb) => {\n        let {\n          cherryPickedOptions,\n          getCurrentSelection,\n          lastSelectedIndex,\n          Selection,\n          selectionStartIndex\n        } = this.PRIVATE\n\n        let { index, shiftKey, ctrlKey, metaKey } = detail\n        let selectedOption = this.options[index]\n\n        if (shiftKey && lastSelectedIndex !== null) {\n          this.PRIVATE.lastSelectedIndex = index\n          this.PRIVATE.cherryPickedOptions.clear()\n          let bounds = [index, selectionStartIndex].sort((a, b) => a - b)\n          return cb(new Selection(bounds[0] === bounds[1] ? [selectedOption] : this.options.slice(bounds[0], bounds[1] + 1)))\n        }\n\n        let currentSelection = getCurrentSelection()\n\n        if (ctrlKey || metaKey) {\n          this.PRIVATE.lastSelectedIndex = index\n          this.PRIVATE.selectionStartIndex = index\n\n          this.PRIVATE.cherryPickedOptions.options = selectedOption.selected ? currentSelection.filter(option => option !== selectedOption) : this.options.filter(option => option === selectedOption || currentSelection.includes(option))\n          return cb(this.PRIVATE.cherryPickedOptions)\n        }\n\n        if (currentSelection.length === 1 && index === lastSelectedIndex) {\n          return\n        }\n\n        this.PRIVATE.lastSelectedIndex = index\n        this.PRIVATE.selectionStartIndex = index\n        this.PRIVATE.cherryPickedOptions.clear()\n        return cb(new Selection([selectedOption]))\n      },\n\n      handleKeyboardSelection: (detail, cb) => {\n        let {\n          cherryPickedOptions,\n          getCurrentSelection,\n          Selection,\n          selectionStartIndex\n        } = this.PRIVATE\n\n        let { index, shiftKey } = detail\n        let selectedOption = this.options[index]\n        let currentSelection = getCurrentSelection()\n\n        this.PRIVATE.lastSelectedIndex = index\n\n        if (!shiftKey || currentSelection.length === 0) {\n          this.PRIVATE.selectionStartIndex = index\n          this.PRIVATE.cherryPickedOptions.clear()\n          return cb(new Selection([selectedOption]))\n        }\n\n        // 1 option or more selected\n        if (currentSelection.length > 0) {\n          let bounds = [index, selectionStartIndex].sort()\n          let selection = new Selection(bounds[0] === bounds[1] ? [selectedOption] : this.options.slice(bounds[0], bounds[1] + 1))\n\n          if (cherryPickedOptions.length > 0) {\n            selection.options = this.options.filter(option => selection.includes(option) || cherryPickedOptions.includes(option))\n          }\n\n          return cb(selection)\n        }\n      },\n\n      optionSelectionHandler: evt => {\n        let {\n          cherryPickedOptions,\n          diffSelections,\n          getCurrentSelection,\n          generateAuthorHTMLCollectionConstructor,\n          handleClickSelection,\n          handleKeyboardSelection,\n          Selection\n        } = this.PRIVATE\n\n        if (cherryPickedOptions === null) {\n          this.PRIVATE.cherryPickedOptions = new Selection([])\n        }\n\n        let { index, keyboard } = evt.detail\n\n        let completeOperation = selection => {\n          let currentSelection = getCurrentSelection()\n          let comparator = selection.length >= currentSelection.length ? selection.options : currentSelection\n          let diff = diffSelections(comparator, comparator === currentSelection ? selection.options : currentSelection)\n\n          if (diff.length === 0 || !this.PRIVATE.isSlave) {\n            return\n          }\n\n          let { beforeChange } = this.parentNode\n\n          let detail = {\n            options: selection.options,\n            previous: this.selectedOptions,\n            next: new (generateAuthorHTMLCollectionConstructor())(selection.displayElements)\n          }\n\n          let cb = () => {\n            this.deselectAll()\n            selection.selectAll()\n            return this.emit('options.selected', detail, this.parentNode)\n          }\n\n          if (!(beforeChange && typeof beforeChange === 'function')) {\n            return cb()\n          }\n\n          beforeChange(this.selectedOptions, detail.next, cb)\n        }\n\n        if (!this.multiple) {\n          return completeOperation(new Selection([this.options[index]]))\n        }\n\n        if (keyboard) {\n          return this.PRIVATE.handleKeyboardSelection(evt.detail, completeOperation)\n        }\n\n        return this.PRIVATE.handleClickSelection(evt.detail, completeOperation)\n      },\n\n      parentStateChangeHandler: evt => {\n        this.emit('state.change', evt.detail)\n\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            if (!value && this.selectedOptions.length > 0) {\n              let index = this.selectedIndex\n\n              this.deselectAll()\n              this.emit('option.selected', { index })\n            }\n\n            break\n\n          default: return\n        }\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.PRIVATE.selectionStartIndex = this.selectedIndex >= 0 ? this.selectedIndex : 0\n\n        if (this.PRIVATE.isSlave) {\n          this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n        }\n      },\n\n      disconnected: () => {\n        if (this.PRIVATE.isSlave) {\n          this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n        }\n      },\n\n      'keydown.arrowUp': this.PRIVATE.arrowUpHandler,\n      'keydown.arrowDown': this.PRIVATE.arrowDownHandler,\n      'option.selected': this.PRIVATE.optionSelectionHandler\n    })\n  }\n\n  get selectedIndex () {\n    return this.selectedOptions.length > 0\n      ? this.selectedOptions.item(0).index\n      : -1\n  }\n\n  set selectedIndex (index) {\n    this.emit('option.selected', { index })\n  }\n\n  get selectionStartIndex () {\n    return this.PRIVATE.selectionStartIndex\n  }\n\n  set selectionStartIndex (value) {\n    this.UTIL.throwError({\n      type: 'readonly',\n      message: `\"selectionStartIndex\" cannot be set manually.`\n    })\n  }\n\n  addOptgroup (optgroup) {\n    let label = document.createElement('author-optgroup-label')\n    label.innerHTML = optgroup.getAttribute('label')\n\n    this.appendChild(label)\n    this.appendChild(optgroup)\n  }\n\n  addOption (option, index = null, dest = this) {\n    if (!customElements.get('author-option')) {\n      return this.UTIL.throwError({\n        type: 'dependency',\n        vars: {\n          name: 'author-option'\n        }\n      })\n    }\n\n    if (option instanceof Option) {\n      option = this.PRIVATE.generateOptionObject(option)\n    }\n\n    if (this.PRIVATE.isSlave) {\n      this.parentNode[`${option.index}`] = option.displayElement\n    }\n\n    if (index) {\n      dest.insertBefore(option.displayElement, dest.children.item(index))\n\n      this.options.splice(index, 0, option)\n\n      if (this.PRIVATE.isSlave) {\n        this.parentNode.sourceElement.add(option.sourceElement, index)\n      }\n\n    } else {\n      dest.appendChild(option.displayElement)\n      this.options.push(option)\n\n      if (this.PRIVATE.isSlave && !this.parentNode.sourceElement[this.options.length - 1]) {\n        this.parentNode.sourceElement.appendChild(option.sourceElement)\n      }\n    }\n\n    if (option.selected) {\n      if (!this.multiple) {\n        this.selectedIndex = option.index\n        return\n      }\n    }\n  }\n\n  addOptions (children) {\n    Array.from(children).forEach(child => {\n      let isElement = child instanceof HTMLElement\n\n      switch (child.nodeName) {\n        case 'OPTION':\n          return this.addOption(isElement ? this.PRIVATE.generateOptionObject(child) : child)\n\n        case 'OPTGROUP':\n          return this.addOptgroup(isElement ? this.PRIVATE.generateOptgroup(child) : child)\n\n        default:\n          return this.UTIL.printToConsole(`${child.nodeName.toLowerCase()} is not a valid child element for <author-select>. Removing...`, 'warning')\n      }\n    })\n  }\n\n  clear () {\n    while (this.lastChild) {\n      this.removeChild(this.lastChild)\n    }\n  }\n\n  deselect (option, updateList = true) {\n    if (typeof option === 'number') {\n      option = this.options[option]\n    }\n\n    option.selected = false\n\n    if (this.PRIVATE.isSlave) {\n      this.parentNode.selectedOptionsElement.remove(option, updateList)\n    }\n  }\n\n  deselectAll (showPlaceholder = true) {\n    this.options.filter(option => option.selected).forEach((option, index, options) => {\n      this.deselect(option, index = options.length - 1 && showPlaceholder)\n    })\n  }\n\n  hoverOption (index) {\n    this.unHoverAllOptions()\n    this.options[index].displayElement.hover = true\n  }\n\n  item (index) {\n    return this.options[index].displayElement\n  }\n\n  namedItem (value) {\n    let query = this.options.filter(option => {\n      let id = option.sourceElement.attributes.getNamedItem('id')\n      return id && id.value === value\n    })\n\n    if (!query.length) {\n      return null\n    }\n\n    return query[query.length - 1].displayElement\n  }\n\n  /**\n   * @method removeOptionByIndex\n   * @param  {Number}  [index=null]\n   * Index of option to remove\n   * @param  {Boolean} [destroy=true]\n   */\n  removeOptionByIndex (index = null) {\n    if (index === null || index >= this.options.length) {\n      return\n    }\n\n    this.options[index].remove()\n  }\n\n  unHoverAllOptions () {\n    this.options.forEach((option, index) => this.unHoverOption(index))\n  }\n\n  unHoverOption (index) {\n    this.options[index].displayElement.hover = false\n  }\n}\n\ncustomElements.define('author-options', AuthorOptionsElement)\n\nexport default AuthorOptionsElement\n"],"names":["AuthorOptionsElement","UTIL","defineProperties","cherryPickedOptions","private","form","readonly","get","parentNode","displayOptions","AuthorHTMLOptionsCollection","PRIVATE","generateAuthorHTMLOptionsCollectionConstructor","array","options","map","option","displayElement","addFunction","element","before","addOption","generateOptionObject","removeFunction","index","removeOptionByIndex","selectedIndex","hoveredIndex","findIndex","hover","isSlave","localName","lastSelectedIndex","multiple","default","selectedIndices","selectedOptions","nodes","querySelectorAll","AuthorHTMLCollection","generateAuthorHTMLCollectionConstructor","Selection","push","includes","unshift","forEach","selected","length","selectionStartIndex","definePrivateMethods","arrowDownHandler","evt","startIndex","detail","hoverOption","emit","keyboard","shiftKey","ctrlKey","metaKey","arrowUpHandler","diffSelections","comparator","comparable","filter","_p","WeakMap","arr","add","remove","set","Symbol","toStringTag","generateOptgroup","optgroup","customElements","throwError","type","vars","name","surrogate","document","createElement","id","generateGuid","label","getAttribute","trim","message","setAttribute","Array","from","sourceElement","OptionConstructor","generateOptionConstructor","parent","key","defaultSelected","innerHTML","attributes","attr","value","removeAttribute","disabled","textContent","hasAttribute","text","bool","setAttr","getCurrentSelection","handleClickSelection","cb","selectedOption","clear","bounds","sort","a","b","slice","currentSelection","handleKeyboardSelection","selection","optionSelectionHandler","completeOperation","diff","beforeChange","previous","next","displayElements","deselectAll","selectAll","parentStateChangeHandler","registerListeners","connected","on","disconnected","off","appendChild","dest","Option","insertBefore","children","item","splice","child","isElement","HTMLElement","nodeName","addOptgroup","printToConsole","toLowerCase","lastChild","removeChild","updateList","selectedOptionsElement","showPlaceholder","deselect","unHoverAllOptions","query","getNamedItem","unHoverOption","AuthorBaseElement","define"],"mappings":"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"}