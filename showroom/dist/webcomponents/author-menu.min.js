var AuthorMenuElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-menu> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),function(){let e=Array.from(new Set([])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <author-menu> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/menu".replace("menu",e.replace("author-",""))}`)))}();class e extends(AuthorBaseElement(HTMLElement)){constructor(e=null){super(e||'<template><style>@charset "UTF-8"; :host *,:host :after,:host :before{box-sizing:border-box}author-menu *,author-menu :after,author-menu :before{box-sizing:border-box}</style><slot></slot></template>'),this.UTIL.defineProperties({form:{readonly:!0},hoveredIndex:{readonly:!0,get:()=>this.optionsElement.hoveredIndex},injected:{private:!0,default:!1},options:{readonly:!0,get:()=>this.optionsElement.displayOptions},optionsElement:{readonly:!0,get:()=>this.querySelector("author-options")},selectedOptions:{readonly:!0,get:()=>this.optionsElement?this.optionsElement.selectedOptions:null},title:{private:!0,default:""},willValidate:{readonly:!0,get:()=>this.sourceElement.willValidate},validationMessage:{readonly:!0,get:()=>this.sourceElement.validationMessage},validity:{readonly:!0,get:()=>this.sourceElement.validity}}),this.UTIL.defineAttributes({name:"",placeholder:"",autofocus:!1,disabled:!1,open:!1,required:!1,size:{get:()=>this.PRIVATE.throwSizeAttributeWarning(),set:()=>this.PRIVATE.throwSizeAttributeWarning()}}),this.UTIL.definePrivateMethods({addOpenListeners:()=>{document.addEventListener("mousedown",this.PRIVATE.bodyMousedownHandler),document.addEventListener("touchcancel",this.PRIVATE.bodyMousedownHandler),document.addEventListener("touchend",this.PRIVATE.bodyMousedownHandler)},blurHandler:e=>this.off("keydown",this.PRIVATE.keydownHandler),bodyMousedownHandler:e=>{e.target===this||this.contains(e.target)||(this.open=!1)},focusHandler:e=>this.on("keydown",this.PRIVATE.keydownHandler),keydownHandler:e=>{let t=this.hoveredIndex>-1?this.hoveredIndex:this.selectedIndex>-1?this.selectedIndex:-1;switch(e[this.keySource]){case 27:case"Escape":return void(this.open=!1);case 13:case"Enter":case 32:case" ":if(e.preventDefault(),!this.multiple){if(!this.open&&(32===e[this.keySource]||" "===e[this.keySource]))return void(this.open=!0);if(this.hoveredIndex===this.selectedIndex||-1===this.hoveredIndex)return void(this.open=!1);this.selectedIndex=this.hoveredIndex}break;case 38:case"ArrowUp":return e.preventDefault(),this.multiple||this.open?this.emit("keydown.arrowUp",{shiftKey:e.shiftKey,startIndex:t},this.optionsElement):void(this.open=!0);case 40:case"ArrowDown":return e.preventDefault(),this.multiple||this.open?this.emit("keydown.arrowDown",{shiftKey:e.shiftKey,startIndex:t},this.optionsElement):void(this.open=!0);case 9:case"Tab":this.open=!1}},optionSelectionHandler:e=>{e.stopPropagation(),this.dispatchEvent(new Event("change",{})),this.open&&this.removeAttribute("open")},removeOpenListeners:()=>{document.removeEventListener("mousedown",this.PRIVATE.bodyMousedownHandler),document.removeEventListener("touchcancel",this.PRIVATE.bodyMousedownHandler),document.removeEventListener("touchend",this.PRIVATE.bodyMousedownHandler)},stateChangeHandler:e=>{let{name:t,value:n}=e.detail;if("multiple"===t&&n&&this.hasAttribute("open")&&this.removeAttribute("open"),"open"===t)return n?this.multiple?this.removeAttribute("open"):(this.optionsElement.unHoverAllOptions(),this.PRIVATE.addOpenListeners()):this.PRIVATE.removeOpenListeners()},throwSizeAttributeWarning:()=>{this.UTIL.printToConsole('"size" attribute is not supported. Please use CSS to set the height of the options panel instead.',"warning")},toggleHandler:e=>this.open=!this.open}),this.UTIL.registerListeners(this,{"attribute.change":e=>{let{attribute:t,oldValue:n,newValue:i}=e.detail;if(i!==n)switch(t){case"open":return this.emit("state.change",{name:"open",value:this.open});case"size":return this.PRIVATE.throwSizeAttributeWarning()}},blur:this.PRIVATE.blurHandler,focus:this.PRIVATE.focusHandler,"options.selected":this.PRIVATE.optionSelectionHandler,"state.change":this.PRIVATE.stateChangeHandler,toggle:this.PRIVATE.toggleHandler,rendered:()=>{this.hasAttribute("tabindex")||this.setAttribute("tabindex",0),this.autofocus&&this.focus()}})}static get observedAttributes(){return["autofocus","disabled","name","open","placeholder","tabindex","size"]}get length(){return this.options.length}get selectedIndex(){return this.optionsElement?this.optionsElement.selectedIndex:-1}set selectedIndex(e){if(e<0)return this.deselectAll();this.optionsElement.selectedIndex=e}get value(){if(0===this.selectedOptions.length)return null;let e=this.selectedOptions.item(0);return e?e.value||e.text:null}add(e,t){this.optionsElement.addOption(e,t)}checkValidity(){return this.sourceElement.checkValidity()}clear(){this.optionsElement.clear()}deselectAll(){this.optionsElement.deselectAll()}inject(e,t=null){if(this.PRIVATE.injected)return;this.UTIL.defineProperty("sourceElement",{readonly:!0,default:e});let n=document.createElement("author-options");n.slot="options",t&&this.UTIL.defineProperty("labels",{private:!0,default:t}),this.appendChild(n),e.children.length>0&&(this.multiple||Array.from(e.children).forEach(t=>{t.index!==e.selectedIndex&&t.removeAttribute("selected")}),this.optionsElement.addOptions(e.children)),this.PRIVATE.injected=!0}item(e){return this.optionsElement.item(e)}namedItem(e){return this.optionsElement.namedItem(e)}querySelector(e){return e.includes(":checked")?this.selectedOptions.length>0?this.selectedOptions[0]:null:super.querySelector(e)}querySelectorAll(e){return e.includes(":checked")?this.optionsElement.querySelectorAll("[selected]"):super.querySelectorAll(e)}remove(e=null){if(null===e)return super.remove();this.optionsElement.removeOptionByIndex(e)}reportValidity(){this.sourceElement.checkValidity()?this.removeAttribute("invalid"):this.setAttribute("invalid","")}setCustomValidity(e){this.sourceElement.setCustomValidity(e)}}return customElements.define("author-menu",e),e}();
//# sourceMappingURL=author-menu.min.js.map
