var AuthorFormControlElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-control> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base"));class t extends(AuthorBaseElement(HTMLElement)){constructor(){super('<template><style>@charset "UTF-8"; :host{display:flex;contain:style;max-width:100%}:host([type=field]){flex-direction:column}:host([type=select]){flex-direction:column}:host([type=toggle]){align-items:center}:host *,:host :after,:host :before{box-sizing:border-box}:host .hidden{display:none;visibility:hidden;opacity:0}:host .label-wrapper{flex:1 1 auto;display:flex}:host .input-wrapper{display:flex;align-items:center}:host([type=toggle]) .input-wrapper{order:-1;justify-content:center}author-control{display:flex;contain:style;max-width:100%}author-control[type=field]{flex-direction:column}author-control[type=select]{flex-direction:column}author-control[type=toggle]{align-items:center}author-control *,author-control :after,author-control :before{box-sizing:border-box}author-control .hidden{display:none;visibility:hidden;opacity:0}author-control .label-wrapper{flex:1 1 auto;display:flex}author-control .input-wrapper{display:flex;align-items:center}author-control[type=toggle] .input-wrapper{order:-1;justify-content:center}</style><slot name="afterbegin"></slot><slot name="beforelabelwrapper"></slot><div class="label-wrapper"><slot name="beforelabel"></slot><slot name="label"></slot><slot name="afterlabel"></slot></div><slot name="afterlabelwrapper"></slot><slot name="beforeinputwrapper"></slot><div class="input-wrapper"><slot name="beforeinput"></slot><slot name="input"></slot><slot name="afterinput"></slot></div><slot name="afterinputwrapper"></slot><slot name="beforeend"></slot></template>'),this.UTIL.defineAttributes({type:""}),this.UTIL.defineProperties({initialValue:{default:null},input:{private:!0},fieldInputTypes:{readonly:!0,private:!0,default:["color","date","datetime-local","email","file","hidden","image","month","number","password","range","reset","search","submit","tel","text","time","url","week","textarea"]},toggleInputTypes:{readonly:!0,private:!0,default:["checkbox","radio"]},supportedTypes:{readonly:!0,private:!0,default:["field","toggle","select"]}}),this.UTIL.definePrivateMethods({initDatalist:(t,e)=>{if(this.type="select",!customElements.get("author-datalist")){return console.dir(t),t.id=this.PRIVATE.guid,e.id=`${t.id}_datalist`,t.setAttribute("list",e.id),t.slot=t.slot||"input",this.PRIVATE.input=t,e.querySelectorAll("option[title]").forEach(t=>select.removeChild(t)),void Array.from(e.options).forEach(t=>{t.hasAttribute("label")&&""===t.getAttribute("label").trim()&&t.removeAttribute("label")})}let i=document.createElement("author-datalist");i.slot="input",Array.from(e.attributes).forEach(t=>{t.specified&&(i.setAttribute(t.name,t.value),"autofocus"===t.name&&e.removeAttribute(t.name))}),this.removeChild(e),this.removeChild(t),i.inject(t,e,this.PRIVATE.guid),this.appendChild(i),this.PRIVATE.input=i},initInput:t=>{t.slot=t.slot||"input",this.PRIVATE.input=t,t.id=this.PRIVATE.guid,this.initialValue=t.value,this.PRIVATE.fieldInputTypes.indexOf(t.type)>=0&&(this.type="field"),this.PRIVATE.toggleInputTypes.indexOf(t.type)>=0&&(this.type="toggle")},initLabel:t=>{this.label=t,t.slot=t.slot||"label",t.htmlFor=this.PRIVATE.guid,"select"===this.type&&this.label.addEventListener("click",t=>{this.input.focus()})},initDefaultSelect:t=>{t.id=this.PRIVATE.guid,t.slot=t.slot||"input",t.setAttribute("role","menu"),this.PRIVATE.input=t,t.querySelectorAll("option[title]").forEach(e=>t.removeChild(e)),Array.from(t.options).forEach(t=>{t.hasAttribute("label")&&""===t.getAttribute("label").trim()&&t.removeAttribute("label")})},initMultipleSelectMenu:t=>{if(this.type="select",this.initialValue=t.selectedOptions,!customElements.get("author-select"))return this.PRIVATE.initDefaultSelect(t);this.PRIVATE.initSelectSurrogate(t,document.createElement("author-select"))},initSelectSurrogate:(t,e)=>{e.slot="input",e.id=this.PRIVATE.guid,Array.from(t.attributes).forEach(i=>{i.specified&&(e.setAttribute(i.name,i.value),"autofocus"===i.name&&t.removeAttribute(i.name))}),this.removeChild(t),e.inject(t,this.querySelectorAll("label")),this.appendChild(e),this.PRIVATE.input=e},initSelectMenu:t=>{if(this.type="select",this.initialValue=t.selectedIndex,!customElements.get("author-select"))return this.PRIVATE.initDefaultSelect(t);this.PRIVATE.initSelectSurrogate(t,document.createElement("author-select"))},transformChild:(t,e,i)=>{switch(t.nodeName){case"LABEL":return this.PRIVATE.initLabel(t);case"INPUT":if(void 0===i[e+1])return this.PRIVATE.initInput(t);let l=i[e+1].addedNodes.item(0);return l&&"DATALIST"===l.nodeName?this.PRIVATE.initDatalist(t,l):this.PRIVATE.initInput(t);case"TEXTAREA":return this.PRIVATE.initInput(t);case"SELECT":return t.multiple?this.PRIVATE.initMultipleSelectMenu(t):this.PRIVATE.initSelectMenu(t);default:return void(this.initialValue=t.value)}}}),this.UTIL.monitorChildren((t,e)=>{t.filter(t=>{let e=t.addedNodes.item(0);return!!e&&3!==e.nodeType}).forEach((t,e,i)=>{let l=t.addedNodes.item(0);l&&this.PRIVATE.transformChild(l,e,i)}),e.disconnect()}),this.UTIL.registerListeners(this,{connected:()=>this.PRIVATE.guid=this.UTIL.generateGuid("control_"),rendered:()=>Array.from(this.children).forEach((t,e,i)=>this.PRIVATE.transformChild(t,e,i))})}static get observedAttributes(){return["disabled"]}get input(){return this.PRIVATE.input}set input(t){if(this.input)return console.warn(`Setting <${this.localName}> child input programmatically is not allowed.`);this.PRIVATE.input=t}}return customElements.define("author-control",t),t}();
//# sourceMappingURL=author-control.min.js.map
