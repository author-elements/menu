{"version":3,"file":"author-select.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      form: {\n        readonly: true\n      },\n\n      hoveredIndex: {\n        readonly: true,\n        get: () => this.optionsElement.hoveredIndex\n      },\n\n      injected: {\n        private: true,\n        default: false\n      },\n\n      labels: {\n        private: true\n      },\n\n      middleware: {\n        private: true,\n        default: {\n          beforeChange: null,\n          afterChange: null\n        }\n      },\n\n      options: {\n        readonly: true,\n        get: () => this.optionsElement.displayOptions\n      },\n\n      optionsElement: {\n        readonly: true,\n        get: () => this.querySelector('author-options')\n      },\n\n      selectedOptions: {\n        readonly: true,\n        get: () => this.optionsElement ? this.optionsElement.selectedOptions : null\n      },\n\n      selectedOptionsElement: {\n        readonly: true,\n        get: () => this.querySelector('author-selected-options')\n      },\n\n      title: {\n        private: true,\n        default: ''\n      },\n\n      type: {\n        readonly: true,\n        get: () => this.multiple ? 'select-multiple' : 'select-one'\n      },\n\n      willValidate: {\n        readonly: true,\n        get: () => this.sourceElement.willValidate\n      },\n\n      validationMessage: {\n        readonly: true,\n        get: () => this.sourceElement.validationMessage\n      },\n\n      validity: {\n        readonly: true,\n        get: () => this.sourceElement.validity\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      name: '',\n      placeholder: '',\n      autofocus: false,\n      disabled: false,\n      multiple: false,\n      open: false,\n      required: false,\n\n      size: {\n        get: () => this.PRIVATE.throwSizeAttributeWarning(),\n        set: () => this.PRIVATE.throwSizeAttributeWarning()\n      },\n    })\n\n    this.UTIL.definePrivateMethods({\n      addOpenListeners: () => {\n        document.addEventListener('mousedown', this.PRIVATE.bodyMousedownHandler)\n        document.addEventListener('touchcancel', this.PRIVATE.bodyMousedownHandler)\n        document.addEventListener('touchend', this.PRIVATE.bodyMousedownHandler)\n      },\n\n      blurHandler: evt => this.off('keydown', this.PRIVATE.keydownHandler),\n\n      bodyMousedownHandler: evt => {\n        if (evt.target === this || this.contains(evt.target)) {\n          return\n        }\n\n        this.open = false\n      },\n\n      focusHandler: evt => this.on('keydown', this.PRIVATE.keydownHandler),\n\n      keydownHandler: evt => {\n        let startIndex = this.hoveredIndex > -1\n          ? this.hoveredIndex\n          : this.selectedIndex > -1\n            ? this.selectedIndex\n            : -1\n\n        switch (evt[this.keySource]) {\n          case 13:\n          case 'Enter':\n          case 32:\n          case ' ':\n            evt.preventDefault()\n\n            if (!this.multiple) {\n              if (!this.open && (evt[this.keySource] === 32 || evt[this.keySource] === ' ')) {\n                this.open = true\n                return\n              }\n\n              if (this.hoveredIndex === this.selectedIndex || this.hoveredIndex === -1) {\n                this.open = false\n                return\n              }\n\n              this.selectedIndex = this.hoveredIndex\n            }\n\n            break\n\n          case 38:\n          case 'ArrowUp':\n            evt.preventDefault()\n\n            if (!this.multiple && !this.open) {\n              this.open = true\n              return\n            }\n\n            return this.emit('keydown.arrowUp', {\n              shiftKey: evt.shiftKey,\n              startIndex\n            }, this.optionsElement)\n\n          case 40:\n          case 'ArrowDown':\n            evt.preventDefault()\n\n            if (!this.multiple && !this.open) {\n              this.open = true\n              return\n            }\n\n            return this.emit('keydown.arrowDown', {\n              shiftKey: evt.shiftKey,\n              startIndex\n            }, this.optionsElement)\n\n          default: return\n        }\n      },\n\n      optionSelectionHandler: evt => {\n        evt.stopPropagation()\n        let { afterChange } = this.PRIVATE.middleware\n\n        this.dispatchEvent(new Event('change', {}))\n\n        if (this.open) {\n          this.removeAttribute('open')\n        }\n\n        this.emit('options.selected', evt.detail.options, this.selectedOptionsElement)\n\n        // if (this.checkValidity()) {\n        //   this.removeAttribute('invalid')\n        // } else {\n        //   this.setAttribute('invalid', '')\n        // }\n\n        if (afterChange && typeof afterChange === 'function') {\n          afterChange(evt.detail.previous, this.selectedOptions)\n        }\n      },\n\n      removeOpenListeners: () => {\n        document.removeEventListener('mousedown', this.PRIVATE.bodyMousedownHandler)\n        document.removeEventListener('touchcancel', this.PRIVATE.bodyMousedownHandler)\n        document.removeEventListener('touchend', this.PRIVATE.bodyMousedownHandler)\n      },\n\n      stateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'open':\n            if (!value) {\n              return this.PRIVATE.removeOpenListeners()\n            }\n\n            if (this.multiple) {\n              return this.removeAttribute('open')\n            }\n\n            this.optionsElement.unHoverAllOptions()\n            return this.PRIVATE.addOpenListeners()\n\n          case 'multiple':\n            if (value && this.hasAttribute('open')) {\n              this.removeAttribute('open')\n            }\n\n            break\n\n          default: return\n        }\n      },\n\n      throwSizeAttributeWarning: () => {\n        this.UTIL.printToConsole(`\"size\" attribute is not supported. Please use CSS to set the height of the options panel instead.`, 'warning')\n      },\n\n      toggleHandler: evt => this.open = !this.open//,\n\n      // validationHandler: evt => this.emit('invalid')\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        switch (attribute) {\n          case 'multiple':\n            return this.emit('state.change', {\n              name: 'multiple',\n              value: this.multiple\n            })\n\n          case 'open':\n            return this.emit('state.change', {\n              name: 'open',\n              value: this.open\n            })\n\n          case 'placeholder':\n            if (this.selectedOptionsElement) {\n              this.selectedOptionsElement.update()\n            }\n\n            break\n\n            case 'size':\n              return this.PRIVATE.throwSizeAttributeWarning()\n\n          default: return\n        }\n      },\n\n      // connected: () => {\n      //   this.sourceElement.addEventListener('invalid', this.PRIVATE.validationHandler)\n      //\n      //   if (!this.checkValidity()) {\n      //     this.setAttribute('invalid', '')\n      //   }\n      // },\n\n      // disconnected: () => {\n      //   this.sourceElement.removeEventListener('invalid', this.PRIVATE.validationHandler)\n      // },\n\n      blur: this.PRIVATE.blurHandler,\n      focus: this.PRIVATE.focusHandler,\n      'options.selected': this.PRIVATE.optionSelectionHandler,\n      'state.change': this.PRIVATE.stateChangeHandler,\n      toggle: this.PRIVATE.toggleHandler,\n\n      rendered: () => {\n        if (!this.hasAttribute('tabindex')) {\n          this.setAttribute('tabindex', 0)\n        }\n\n        this.autofocus && this.focus()\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['autofocus', 'disabled', 'multiple', 'name', 'open', 'placeholder', 'tabindex', 'size']\n  }\n\n  get afterChange () {\n    return this.PRIVATE.middleware.afterChange\n  }\n\n  set afterChange (func) {\n    this.PRIVATE.middleware.afterChange = func.bind(this)\n  }\n\n  get beforeChange () {\n    return this.PRIVATE.middleware.beforeChange\n  }\n\n  set beforeChange (func) {\n    this.PRIVATE.middleware.beforeChange = func.bind(this)\n  }\n\n  get length () {\n    return this.options.length\n  }\n\n  get selectedIndex () {\n    return this.optionsElement ? this.optionsElement.selectedIndex : -1\n  }\n\n  set selectedIndex (index) {\n    if (index < 0) {\n      return this.deselectAll()\n    }\n\n    this.optionsElement.selectedIndex = index\n  }\n\n  get value () {\n    if (this.selectedOptions.length === 0) {\n      return null\n    }\n\n    let selectedOption = this.selectedOptions.item(0)\n    return selectedOption ? selectedOption.value || selectedOption.text : null\n  }\n\n  add (option, index) {\n    this.optionsElement.addOption(option, index)\n  }\n\n  checkValidity () {\n    return this.sourceElement.checkValidity()\n  }\n\n  clear () {\n    this.optionsElement.clear()\n    this.selectedOptionsElement.clear()\n  }\n\n  deselectAll () {\n    this.optionsElement.deselectAll()\n  }\n\n  inject (select, labels) {\n    // Prevent re-injections\n    if (this.PRIVATE.injected) {\n      return\n    }\n\n    this.UTIL.defineProperty('sourceElement', {\n      readonly: true,\n      default: select\n    })\n\n    let selectedOptionsElement = document.createElement('author-selected-options')\n    selectedOptionsElement.slot = 'selectedoptions'\n\n    let optionsElement = document.createElement('author-options')\n    optionsElement.slot = 'options'\n\n    this.PRIVATE.labels = labels\n\n    this.appendChild(selectedOptionsElement)\n    this.appendChild(optionsElement)\n\n    if (select.children.length > 0) {\n      if (!this.multiple) {\n        Array.from(select.children).forEach(option => {\n          if (option.index !== select.selectedIndex) {\n            option.removeAttribute('selected')\n          }\n        })\n      }\n\n      this.optionsElement.addOptions(select.children)\n\n      if (!this.multiple) {\n        this.selectedOptionsElement.add(this.optionsElement.options[this.selectedIndex])\n      }\n    }\n\n    this.PRIVATE.injected = true\n  }\n\n  item (index) {\n    return this.optionsElement.item(index)\n  }\n\n  namedItem (id) {\n    return this.optionsElement.namedItem(id)\n  }\n\n  /**\n   * method querySelector\n   * @param  {string} selector\n   * @return {HTMLElement}\n   * @override\n   */\n  querySelector (selector) {\n    if (selector !== ':checked') {\n      return super.querySelector(selector)\n    }\n\n    return this.selectedOptions.length > 0 ? this.selectedOptions[0] : null\n  }\n\n  /**\n   * method querySelectorAll\n   * @param  {string} selector\n   * @return {NodeList}\n   * @override\n   */\n  querySelectorAll (selector) {\n    if (selector !== ':checked') {\n      return super.querySelectorAll(selector)\n    }\n\n    return this.optionsElement.querySelectorAll('[selected]')\n  }\n\n  remove (index = null) {\n    if (index === null) {\n      return super.remove()\n    }\n\n    this.optionsElement.removeOptionByIndex(index)\n  }\n\n  reportValidity () {\n    let isValid = this.sourceElement.checkValidity()\n\n    if (isValid) {\n      this.removeAttribute('invalid')\n    } else {\n      this.setAttribute('invalid', '')\n    }\n  }\n\n  setCustomValidity (string) {\n    this.sourceElement.setCustomValidity(string)\n  }\n}\n\ncustomElements.define('author-select', AuthorSelectElement)\n\nexport default AuthorSelectElement\n"],"names":["AuthorSelectElement","UTIL","defineProperties","form","readonly","hoveredIndex","get","optionsElement","injected","private","default","labels","middleware","beforeChange","afterChange","options","displayOptions","querySelector","selectedOptions","selectedOptionsElement","title","type","multiple","willValidate","sourceElement","validationMessage","validity","defineAttributes","name","placeholder","autofocus","disabled","open","required","size","PRIVATE","throwSizeAttributeWarning","set","definePrivateMethods","addOpenListeners","document","addEventListener","bodyMousedownHandler","blurHandler","evt","off","keydownHandler","target","contains","focusHandler","on","startIndex","selectedIndex","keySource","preventDefault","emit","shiftKey","optionSelectionHandler","stopPropagation","dispatchEvent","Event","removeAttribute","detail","previous","removeOpenListeners","removeEventListener","stateChangeHandler","value","unHoverAllOptions","hasAttribute","printToConsole","toggleHandler","registerListeners","attribute","oldValue","newValue","update","blur","focus","toggle","rendered","setAttribute","option","index","addOption","checkValidity","clear","deselectAll","select","defineProperty","createElement","slot","appendChild","children","length","Array","from","forEach","addOptions","add","item","id","namedItem","selector","querySelectorAll","removeOptionByIndex","isValid","string","setCustomValidity","func","bind","selectedOption","text","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;;;;;EACJ,iCAAe;EAAA;;EAAA;;EACb;;EAEA,UAAKC,IAAL,CAAUC,gBAAV,CAA2B;EACzBC,MAAAA,IAAI,EAAE;EACJC,QAAAA,QAAQ,EAAE;EADN,OADmB;EAKzBC,MAAAA,YAAY,EAAE;EACZD,QAAAA,QAAQ,EAAE,IADE;EAEZE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKC,cAAL,CAAoBF,YAA1B;EAAA;EAFO,OALW;EAUzBG,MAAAA,QAAQ,EAAE;EACRC,QAAAA,OAAO,EAAE,IADD;EAERC,QAAAA,OAAO,EAAE;EAFD,OAVe;EAezBC,MAAAA,MAAM,EAAE;EACNF,QAAAA,OAAO,EAAE;EADH,OAfiB;EAmBzBG,MAAAA,UAAU,EAAE;EACVH,QAAAA,OAAO,EAAE,IADC;EAEVC,QAAAA,OAAO,EAAE;EACPG,UAAAA,YAAY,EAAE,IADP;EAEPC,UAAAA,WAAW,EAAE;EAFN;EAFC,OAnBa;EA2BzBC,MAAAA,OAAO,EAAE;EACPX,QAAAA,QAAQ,EAAE,IADH;EAEPE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKC,cAAL,CAAoBS,cAA1B;EAAA;EAFE,OA3BgB;EAgCzBT,MAAAA,cAAc,EAAE;EACdH,QAAAA,QAAQ,EAAE,IADI;EAEdE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKW,aAAL,CAAmB,gBAAnB,CAAN;EAAA;EAFS,OAhCS;EAqCzBC,MAAAA,eAAe,EAAE;EACfd,QAAAA,QAAQ,EAAE,IADK;EAEfE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBW,eAA1C,GAA4D,IAAlE;EAAA;EAFU,OArCQ;EA0CzBC,MAAAA,sBAAsB,EAAE;EACtBf,QAAAA,QAAQ,EAAE,IADY;EAEtBE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKW,aAAL,CAAmB,yBAAnB,CAAN;EAAA;EAFiB,OA1CC;EA+CzBG,MAAAA,KAAK,EAAE;EACLX,QAAAA,OAAO,EAAE,IADJ;EAELC,QAAAA,OAAO,EAAE;EAFJ,OA/CkB;EAoDzBW,MAAAA,IAAI,EAAE;EACJjB,QAAAA,QAAQ,EAAE,IADN;EAEJE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKgB,QAAL,GAAgB,iBAAhB,GAAoC,YAA1C;EAAA;EAFD,OApDmB;EAyDzBC,MAAAA,YAAY,EAAE;EACZnB,QAAAA,QAAQ,EAAE,IADE;EAEZE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKkB,aAAL,CAAmBD,YAAzB;EAAA;EAFO,OAzDW;EA8DzBE,MAAAA,iBAAiB,EAAE;EACjBrB,QAAAA,QAAQ,EAAE,IADO;EAEjBE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKkB,aAAL,CAAmBC,iBAAzB;EAAA;EAFY,OA9DM;EAmEzBC,MAAAA,QAAQ,EAAE;EACRtB,QAAAA,QAAQ,EAAE,IADF;EAERE,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKkB,aAAL,CAAmBE,QAAzB;EAAA;EAFG;EAnEe,KAA3B;;EAyEA,UAAKzB,IAAL,CAAU0B,gBAAV,CAA2B;EACzBC,MAAAA,IAAI,EAAE,EADmB;EAEzBC,MAAAA,WAAW,EAAE,EAFY;EAGzBC,MAAAA,SAAS,EAAE,KAHc;EAIzBC,MAAAA,QAAQ,EAAE,KAJe;EAKzBT,MAAAA,QAAQ,EAAE,KALe;EAMzBU,MAAAA,IAAI,EAAE,KANmB;EAOzBC,MAAAA,QAAQ,EAAE,KAPe;EASzBC,MAAAA,IAAI,EAAE;EACJ5B,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAK6B,OAAL,CAAaC,yBAAb,EAAN;EAAA,SADD;EAEJC,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKF,OAAL,CAAaC,yBAAb,EAAN;EAAA;EAFD;EATmB,KAA3B;;EAeA,UAAKnC,IAAL,CAAUqC,oBAAV,CAA+B;EAC7BC,MAAAA,gBAAgB,EAAE,4BAAM;EACtBC,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuC,MAAKN,OAAL,CAAaO,oBAApD;EACAF,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,EAAyC,MAAKN,OAAL,CAAaO,oBAAtD;EACAF,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsC,MAAKN,OAAL,CAAaO,oBAAnD;EACD,OAL4B;EAO7BC,MAAAA,WAAW,EAAE,qBAAAC,GAAG;EAAA,eAAI,MAAKC,GAAL,CAAS,SAAT,EAAoB,MAAKV,OAAL,CAAaW,cAAjC,CAAJ;EAAA,OAPa;EAS7BJ,MAAAA,oBAAoB,EAAE,8BAAAE,GAAG,EAAI;EAC3B,YAAIA,GAAG,CAACG,MAAJ,sCAAuB,MAAKC,QAAL,CAAcJ,GAAG,CAACG,MAAlB,CAA3B,EAAsD;EACpD;EACD;;EAED,cAAKf,IAAL,GAAY,KAAZ;EACD,OAf4B;EAiB7BiB,MAAAA,YAAY,EAAE,sBAAAL,GAAG;EAAA,eAAI,MAAKM,EAAL,CAAQ,SAAR,EAAmB,MAAKf,OAAL,CAAaW,cAAhC,CAAJ;EAAA,OAjBY;EAmB7BA,MAAAA,cAAc,EAAE,wBAAAF,GAAG,EAAI;EACrB,YAAIO,UAAU,GAAG,MAAK9C,YAAL,GAAoB,CAAC,CAArB,GACb,MAAKA,YADQ,GAEb,MAAK+C,aAAL,GAAqB,CAAC,CAAtB,GACE,MAAKA,aADP,GAEE,CAAC,CAJP;;EAMA,gBAAQR,GAAG,CAAC,MAAKS,SAAN,CAAX;EACE,eAAK,EAAL;EACA,eAAK,OAAL;EACA,eAAK,EAAL;EACA,eAAK,GAAL;EACET,YAAAA,GAAG,CAACU,cAAJ;;EAEA,gBAAI,CAAC,MAAKhC,QAAV,EAAoB;EAClB,kBAAI,CAAC,MAAKU,IAAN,KAAeY,GAAG,CAAC,MAAKS,SAAN,CAAH,KAAwB,EAAxB,IAA8BT,GAAG,CAAC,MAAKS,SAAN,CAAH,KAAwB,GAArE,CAAJ,EAA+E;EAC7E,sBAAKrB,IAAL,GAAY,IAAZ;EACA;EACD;;EAED,kBAAI,MAAK3B,YAAL,KAAsB,MAAK+C,aAA3B,IAA4C,MAAK/C,YAAL,KAAsB,CAAC,CAAvE,EAA0E;EACxE,sBAAK2B,IAAL,GAAY,KAAZ;EACA;EACD;;EAED,oBAAKoB,aAAL,GAAqB,MAAK/C,YAA1B;EACD;;EAED;;EAEF,eAAK,EAAL;EACA,eAAK,SAAL;EACEuC,YAAAA,GAAG,CAACU,cAAJ;;EAEA,gBAAI,CAAC,MAAKhC,QAAN,IAAkB,CAAC,MAAKU,IAA5B,EAAkC;EAChC,oBAAKA,IAAL,GAAY,IAAZ;EACA;EACD;;EAED,mBAAO,MAAKuB,IAAL,CAAU,iBAAV,EAA6B;EAClCC,cAAAA,QAAQ,EAAEZ,GAAG,CAACY,QADoB;EAElCL,cAAAA,UAAU,EAAVA;EAFkC,aAA7B,EAGJ,MAAK5C,cAHD,CAAP;;EAKF,eAAK,EAAL;EACA,eAAK,WAAL;EACEqC,YAAAA,GAAG,CAACU,cAAJ;;EAEA,gBAAI,CAAC,MAAKhC,QAAN,IAAkB,CAAC,MAAKU,IAA5B,EAAkC;EAChC,oBAAKA,IAAL,GAAY,IAAZ;EACA;EACD;;EAED,mBAAO,MAAKuB,IAAL,CAAU,mBAAV,EAA+B;EACpCC,cAAAA,QAAQ,EAAEZ,GAAG,CAACY,QADsB;EAEpCL,cAAAA,UAAU,EAAVA;EAFoC,aAA/B,EAGJ,MAAK5C,cAHD,CAAP;;EAKF;EAAS;EAnDX;EAqDD,OA/E4B;EAiF7BkD,MAAAA,sBAAsB,EAAE,gCAAAb,GAAG,EAAI;EAC7BA,QAAAA,GAAG,CAACc,eAAJ;EAD6B,YAEvB5C,WAFuB,GAEP,MAAKqB,OAAL,CAAavB,UAFN,CAEvBE,WAFuB;;EAI7B,cAAK6C,aAAL,CAAmB,IAAIC,KAAJ,CAAU,QAAV,EAAoB,EAApB,CAAnB;;EAEA,YAAI,MAAK5B,IAAT,EAAe;EACb,gBAAK6B,eAAL,CAAqB,MAArB;EACD;;EAED,cAAKN,IAAL,CAAU,kBAAV,EAA8BX,GAAG,CAACkB,MAAJ,CAAW/C,OAAzC,EAAkD,MAAKI,sBAAvD,EAV6B;EAa7B;EACA;EACA;EACA;;;EAEA,YAAIL,WAAW,IAAI,OAAOA,WAAP,KAAuB,UAA1C,EAAsD;EACpDA,UAAAA,WAAW,CAAC8B,GAAG,CAACkB,MAAJ,CAAWC,QAAZ,EAAsB,MAAK7C,eAA3B,CAAX;EACD;EACF,OAtG4B;EAwG7B8C,MAAAA,mBAAmB,EAAE,+BAAM;EACzBxB,QAAAA,QAAQ,CAACyB,mBAAT,CAA6B,WAA7B,EAA0C,MAAK9B,OAAL,CAAaO,oBAAvD;EACAF,QAAAA,QAAQ,CAACyB,mBAAT,CAA6B,aAA7B,EAA4C,MAAK9B,OAAL,CAAaO,oBAAzD;EACAF,QAAAA,QAAQ,CAACyB,mBAAT,CAA6B,UAA7B,EAAyC,MAAK9B,OAAL,CAAaO,oBAAtD;EACD,OA5G4B;EA8G7BwB,MAAAA,kBAAkB,EAAE,4BAAAtB,GAAG,EAAI;EAAA,0BACHA,GAAG,CAACkB,MADD;EAAA,YACnBlC,IADmB,eACnBA,IADmB;EAAA,YACbuC,KADa,eACbA,KADa;;EAGzB,gBAAQvC,IAAR;EACE,eAAK,MAAL;EACE,gBAAI,CAACuC,KAAL,EAAY;EACV,qBAAO,MAAKhC,OAAL,CAAa6B,mBAAb,EAAP;EACD;;EAED,gBAAI,MAAK1C,QAAT,EAAmB;EACjB,qBAAO,MAAKuC,eAAL,CAAqB,MAArB,CAAP;EACD;;EAED,kBAAKtD,cAAL,CAAoB6D,iBAApB;;EACA,mBAAO,MAAKjC,OAAL,CAAaI,gBAAb,EAAP;;EAEF,eAAK,UAAL;EACE,gBAAI4B,KAAK,IAAI,MAAKE,YAAL,CAAkB,MAAlB,CAAb,EAAwC;EACtC,oBAAKR,eAAL,CAAqB,MAArB;EACD;;EAED;;EAEF;EAAS;EApBX;EAsBD,OAvI4B;EAyI7BzB,MAAAA,yBAAyB,EAAE,qCAAM;EAC/B,cAAKnC,IAAL,CAAUqE,cAAV,wGAA8H,SAA9H;EACD,OA3I4B;EA6I7BC,MAAAA,aAAa,EAAE,uBAAA3B,GAAG;EAAA,eAAI,MAAKZ,IAAL,GAAY,CAAC,MAAKA,IAAtB;EAAA,OA7IW;EA+I7B;;EA/I6B,KAA/B;;EAkJA,UAAK/B,IAAL,CAAUuE,iBAAV,gCAAkC;EAChC,0BAAoB,yBAAA5B,GAAG,EAAI;EAAA,2BACeA,GAAG,CAACkB,MADnB;EAAA,YACnBW,SADmB,gBACnBA,SADmB;EAAA,YACRC,QADQ,gBACRA,QADQ;EAAA,YACEC,QADF,gBACEA,QADF;;EAGzB,YAAIA,QAAQ,KAAKD,QAAjB,EAA2B;EACzB;EACD;;EAED,gBAAQD,SAAR;EACE,eAAK,UAAL;EACE,mBAAO,MAAKlB,IAAL,CAAU,cAAV,EAA0B;EAC/B3B,cAAAA,IAAI,EAAE,UADyB;EAE/BuC,cAAAA,KAAK,EAAE,MAAK7C;EAFmB,aAA1B,CAAP;;EAKF,eAAK,MAAL;EACE,mBAAO,MAAKiC,IAAL,CAAU,cAAV,EAA0B;EAC/B3B,cAAAA,IAAI,EAAE,MADyB;EAE/BuC,cAAAA,KAAK,EAAE,MAAKnC;EAFmB,aAA1B,CAAP;;EAKF,eAAK,aAAL;EACE,gBAAI,MAAKb,sBAAT,EAAiC;EAC/B,oBAAKA,sBAAL,CAA4ByD,MAA5B;EACD;;EAED;;EAEA,eAAK,MAAL;EACE,mBAAO,MAAKzC,OAAL,CAAaC,yBAAb,EAAP;;EAEJ;EAAS;EAvBX;EAyBD,OAjC+B;EAmChC;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EAEAyC,MAAAA,IAAI,EAAE,MAAK1C,OAAL,CAAaQ,WA/Ca;EAgDhCmC,MAAAA,KAAK,EAAE,MAAK3C,OAAL,CAAac,YAhDY;EAiDhC,0BAAoB,MAAKd,OAAL,CAAasB,sBAjDD;EAkDhC,sBAAgB,MAAKtB,OAAL,CAAa+B,kBAlDG;EAmDhCa,MAAAA,MAAM,EAAE,MAAK5C,OAAL,CAAaoC,aAnDW;EAqDhCS,MAAAA,QAAQ,EAAE,oBAAM;EACd,YAAI,CAAC,MAAKX,YAAL,CAAkB,UAAlB,CAAL,EAAoC;EAClC,gBAAKY,YAAL,CAAkB,UAAlB,EAA8B,CAA9B;EACD;;EAED,cAAKnD,SAAL,IAAkB,MAAKgD,KAAL,EAAlB;EACD;EA3D+B,KAAlC;;EA7Oa;EA0Sd;;;;0BA+CII,QAAQC,OAAO;EAClB,WAAK5E,cAAL,CAAoB6E,SAApB,CAA8BF,MAA9B,EAAsCC,KAAtC;EACD;;;sCAEgB;EACf,aAAO,KAAK3D,aAAL,CAAmB6D,aAAnB,EAAP;EACD;;;8BAEQ;EACP,WAAK9E,cAAL,CAAoB+E,KAApB;EACA,WAAKnE,sBAAL,CAA4BmE,KAA5B;EACD;;;oCAEc;EACb,WAAK/E,cAAL,CAAoBgF,WAApB;EACD;;;6BAEOC,QAAQ7E,QAAQ;EACtB;EACA,UAAI,KAAKwB,OAAL,CAAa3B,QAAjB,EAA2B;EACzB;EACD;;EAED,WAAKP,IAAL,CAAUwF,cAAV,CAAyB,eAAzB,EAA0C;EACxCrF,QAAAA,QAAQ,EAAE,IAD8B;EAExCM,QAAAA,OAAO,EAAE8E;EAF+B,OAA1C;EAKA,UAAIrE,sBAAsB,GAAGqB,QAAQ,CAACkD,aAAT,CAAuB,yBAAvB,CAA7B;EACAvE,MAAAA,sBAAsB,CAACwE,IAAvB,GAA8B,iBAA9B;EAEA,UAAIpF,cAAc,GAAGiC,QAAQ,CAACkD,aAAT,CAAuB,gBAAvB,CAArB;EACAnF,MAAAA,cAAc,CAACoF,IAAf,GAAsB,SAAtB;EAEA,WAAKxD,OAAL,CAAaxB,MAAb,GAAsBA,MAAtB;EAEA,WAAKiF,WAAL,CAAiBzE,sBAAjB;EACA,WAAKyE,WAAL,CAAiBrF,cAAjB;;EAEA,UAAIiF,MAAM,CAACK,QAAP,CAAgBC,MAAhB,GAAyB,CAA7B,EAAgC;EAC9B,YAAI,CAAC,KAAKxE,QAAV,EAAoB;EAClByE,UAAAA,KAAK,CAACC,IAAN,CAAWR,MAAM,CAACK,QAAlB,EAA4BI,OAA5B,CAAoC,UAAAf,MAAM,EAAI;EAC5C,gBAAIA,MAAM,CAACC,KAAP,KAAiBK,MAAM,CAACpC,aAA5B,EAA2C;EACzC8B,cAAAA,MAAM,CAACrB,eAAP,CAAuB,UAAvB;EACD;EACF,WAJD;EAKD;;EAED,aAAKtD,cAAL,CAAoB2F,UAApB,CAA+BV,MAAM,CAACK,QAAtC;;EAEA,YAAI,CAAC,KAAKvE,QAAV,EAAoB;EAClB,eAAKH,sBAAL,CAA4BgF,GAA5B,CAAgC,KAAK5F,cAAL,CAAoBQ,OAApB,CAA4B,KAAKqC,aAAjC,CAAhC;EACD;EACF;;EAED,WAAKjB,OAAL,CAAa3B,QAAb,GAAwB,IAAxB;EACD;;;2BAEK2E,OAAO;EACX,aAAO,KAAK5E,cAAL,CAAoB6F,IAApB,CAAyBjB,KAAzB,CAAP;EACD;;;gCAEUkB,IAAI;EACb,aAAO,KAAK9F,cAAL,CAAoB+F,SAApB,CAA8BD,EAA9B,CAAP;EACD;EAED;;;;;;;;;oCAMeE,UAAU;EACvB,UAAIA,QAAQ,KAAK,UAAjB,EAA6B;EAC3B,sGAA2BA,QAA3B;EACD;;EAED,aAAO,KAAKrF,eAAL,CAAqB4E,MAArB,GAA8B,CAA9B,GAAkC,KAAK5E,eAAL,CAAqB,CAArB,CAAlC,GAA4D,IAAnE;EACD;EAED;;;;;;;;;uCAMkBqF,UAAU;EAC1B,UAAIA,QAAQ,KAAK,UAAjB,EAA6B;EAC3B,yGAA8BA,QAA9B;EACD;;EAED,aAAO,KAAKhG,cAAL,CAAoBiG,gBAApB,CAAqC,YAArC,CAAP;EACD;;;+BAEqB;EAAA,UAAdrB,KAAc,uEAAN,IAAM;;EACpB,UAAIA,KAAK,KAAK,IAAd,EAAoB;EAClB;EACD;;EAED,WAAK5E,cAAL,CAAoBkG,mBAApB,CAAwCtB,KAAxC;EACD;;;uCAEiB;EAChB,UAAIuB,OAAO,GAAG,KAAKlF,aAAL,CAAmB6D,aAAnB,EAAd;;EAEA,UAAIqB,OAAJ,EAAa;EACX,aAAK7C,eAAL,CAAqB,SAArB;EACD,OAFD,MAEO;EACL,aAAKoB,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;EACD;EACF;;;wCAEkB0B,QAAQ;EACzB,WAAKnF,aAAL,CAAmBoF,iBAAnB,CAAqCD,MAArC;EACD;;;0BA3JkB;EACjB,aAAO,KAAKxE,OAAL,CAAavB,UAAb,CAAwBE,WAA/B;EACD;wBAEgB+F,MAAM;EACrB,WAAK1E,OAAL,CAAavB,UAAb,CAAwBE,WAAxB,GAAsC+F,IAAI,CAACC,IAAL,CAAU,IAAV,CAAtC;EACD;;;0BAEmB;EAClB,aAAO,KAAK3E,OAAL,CAAavB,UAAb,CAAwBC,YAA/B;EACD;wBAEiBgG,MAAM;EACtB,WAAK1E,OAAL,CAAavB,UAAb,CAAwBC,YAAxB,GAAuCgG,IAAI,CAACC,IAAL,CAAU,IAAV,CAAvC;EACD;;;0BAEa;EACZ,aAAO,KAAK/F,OAAL,CAAa+E,MAApB;EACD;;;0BAEoB;EACnB,aAAO,KAAKvF,cAAL,GAAsB,KAAKA,cAAL,CAAoB6C,aAA1C,GAA0D,CAAC,CAAlE;EACD;wBAEkB+B,OAAO;EACxB,UAAIA,KAAK,GAAG,CAAZ,EAAe;EACb,eAAO,KAAKI,WAAL,EAAP;EACD;;EAED,WAAKhF,cAAL,CAAoB6C,aAApB,GAAoC+B,KAApC;EACD;;;0BAEY;EACX,UAAI,KAAKjE,eAAL,CAAqB4E,MAArB,KAAgC,CAApC,EAAuC;EACrC,eAAO,IAAP;EACD;;EAED,UAAIiB,cAAc,GAAG,KAAK7F,eAAL,CAAqBkF,IAArB,CAA0B,CAA1B,CAArB;EACA,aAAOW,cAAc,GAAGA,cAAc,CAAC5C,KAAf,IAAwB4C,cAAc,CAACC,IAA1C,GAAiD,IAAtE;EACD;;;0BA3CgC;EAC/B,aAAO,CAAC,WAAD,EAAc,UAAd,EAA0B,UAA1B,EAAsC,MAAtC,EAA8C,MAA9C,EAAsD,aAAtD,EAAqE,UAArE,EAAiF,MAAjF,CAAP;EACD;;;;IA/S+BC,iBAAiB,CAACC,WAAD;;EA+cnDC,cAAc,CAACC,MAAf,CAAsB,eAAtB,EAAuCpH,mBAAvC;;;;;;;;"}