{"version":3,"file":"author-option.js","sources":["../src/element.js"],"sourcesContent":["class AuthorOptionElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      disabled: false,\n      hover: false,\n      id: '',\n      label: '',\n      selected: false,\n      value: ''\n    })\n\n    this.UTIL.defineProperties({\n      defaultSelected: false,\n\n      form: {\n        readonly: true,\n        private: true\n      },\n\n      index: {\n        readonly: true,\n        get: () => this.parentNode.options.findIndex(option => option.displayElement === this)\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      mouseButtonIsDown: evt => {\n        let code = evt.buttons !== undefined ? evt.buttons : evt.nativeEvent.which\n        return code >= 1\n      },\n\n      mousemoveHandler: evt => this.emit('option.hovered', this.index),\n\n      mouseoutHandler: evt => this.hover = false,\n\n      mouseoverHandler: evt => {\n        let mousedown = this.PRIVATE.mouseButtonIsDown(evt)\n\n        if (!(this.parentNode.multiple && mousedown)) {\n          this.hover = true\n          return\n        }\n\n        this.PRIVATE.select(true, evt.metaKey, evt.ctrlKey, mousedown)\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            return this.PRIVATE.setMode(value ? 'select-multiple' : 'select-one')\n        }\n      },\n\n      setMode: mode => {\n        switch (mode) {\n          case 'select-multiple':\n            this.off('mouseup', this.PRIVATE.selectionHandler)\n            return this.on('mousedown', this.PRIVATE.selectionHandler)\n\n          case 'select-one':\n            this.on('mouseup', this.PRIVATE.selectionHandler)\n            return this.off('mousedown', this.PRIVATE.selectionHandler)\n        }\n      },\n\n      select: (shiftKey = false, metaKey = false, ctrlKey = false, mousedown = false) => {\n        let { index } = this\n        this.emit('option.selected', {index, shiftKey, metaKey, ctrlKey, mousedown}, this.parentNode)\n      },\n\n      selectionHandler: evt => {\n        let { shiftKey, metaKey, ctrlKey } = evt\n        this.PRIVATE.select(shiftKey, metaKey, ctrlKey)\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n        this.parentNode.multiple && this.PRIVATE.setMode('select-multiple')\n      },\n\n      disconnected: () => {\n        this.off('mousedown', this.PRIVATE.selectionHandler)\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mouseover: this.PRIVATE.mouseoverHandler,\n      mousemove: this.PRIVATE.mousemoveHandler,\n      mouseout: this.PRIVATE.mouseoutHandler,\n      mouseup: this.PRIVATE.selectionHandler\n    })\n  }\n\n  static get observedAttributes () {\n    return ['disabled', 'hidden', 'hover', 'label', 'selected', 'value']\n  }\n\n  get text () {\n    return this.innerHTML\n  }\n\n  set text (content) {\n    this.innerHTML = content\n  }\n\n  /**\n   * @method remove\n   * Remove this option from the DOM.\n   * @override\n   */\n  remove () {\n    this.parentNode.options.splice(this.index, 1)\n    super.remove()\n  }\n}\n\ncustomElements.define('author-option', AuthorOptionElement)\n\nexport default AuthorOptionElement\n"],"names":[],"mappings":"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"}