{"version":3,"file":"author-selected-options.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectedOptionsElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      contentsElement: {\n        readonly: true,\n        private: true,\n        default: this.shadowRoot.getElementById('contents')\n      },\n\n      options: {\n        private: true,\n        default: []\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      appendCaret: () => {\n        let xmlns = 'http://www.w3.org/2000/svg'\n        let width = 24\n        let height = 24\n\n        let caret = document.createElementNS(xmlns, 'svg')\n        caret.slot = 'beforeend'\n        caret.setAttributeNS(null, 'width', width)\n        caret.setAttributeNS(null, 'height', height)\n        caret.setAttributeNS(null, 'viewBox', `0 0 ${width} ${height}`)\n        caret.setAttributeNS(null, 'fill', 'none')\n        caret.setAttributeNS(null, 'stroke', 'currentColor')\n        caret.setAttributeNS(null, 'stroke-width', '3')\n        caret.setAttributeNS(null, 'stroke-linecap', 'square')\n        caret.setAttributeNS(null, 'stroke-linejoin', 'miter')\n\n        let shape = document.createElementNS(xmlns, 'polyline')\n        shape.setAttributeNS(null, 'points', '6 9 12 15 18 9')\n\n        caret.appendChild(shape)\n        this.appendChild(caret)\n      },\n\n      optionSelectionHandler: evt => {\n        evt.stopPropagation()\n\n        this.clear(evt.detail.length === 0)\n        evt.detail.forEach((option, index) => this.add(option, index === evt.detail.length - 1))\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            if (!value) {\n              return this.on('mousedown', this.PRIVATE.mousedownHandler)\n            }\n\n            return this.off('mousedown', this.PRIVATE.mousedownHandler)\n\n          default: return\n        }\n      },\n\n      mousedownHandler: evt => this.emit('toggle', null, this.parentNode)\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.PRIVATE.appendCaret()\n        this.update()\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      disconnected: () => {\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mousedown: this.PRIVATE.mousedownHandler,\n      'options.selected': this.PRIVATE.optionSelectionHandler\n    })\n  }\n\n  get list () {\n    return this.PRIVATE.options.map(option => option.displayElement.text).join(', ')\n  }\n\n  add (option, update = true) {\n    this.PRIVATE.options.push(option)\n    update && this.update()\n  }\n\n  clear (update = true) {\n    this.PRIVATE.options = []\n    update && this.update()\n  }\n\n  remove (option, update = true) {\n    this.PRIVATE.options.splice(this.PRIVATE.options.indexOf(option), 1)\n    update && this.update()\n  }\n\n  update (options = this.PRIVATE.options) {\n    if (options !== this.PRIVATE.options) {\n      this.PRIVATE.options = options\n    }\n\n    this.PRIVATE.contentsElement.innerHTML = options.length > 0\n      ? this.list\n      : this.parentNode.placeholder || ''\n  }\n}\n\ncustomElements.define('author-selected-options', AuthorSelectedOptionsElement)\n\nexport default AuthorSelectedOptionsElement\n"],"names":["super","let","this"],"mappings":"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"}