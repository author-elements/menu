var AuthorMenuElement=function(){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}var e;window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-menu> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),0<(e=Array.from(new Set([])).filter(function(e){return!customElements.get(e)})).length&&(console.error("[ERROR] <author-menu> Required dependenc".concat(1!==e.length?"ies":"y"," not found: ").concat(e.map(function(e){return"<".concat(e,">")}).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1]))),e.forEach(function(e,t){return console.info("".concat(t+1,". <").concat(e,"> is available at ").concat("https://github.com/author-elements/menu".replace("menu",e.replace("author-",""))))}));var t=function(e){function o(){var r,e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=this,t=l(o).call(this,n||'<template><style>@charset "UTF-8"; :host *,:host :after,:host :before{box-sizing:border-box}author-menu *,author-menu :after,author-menu :before{box-sizing:border-box}</style><slot></slot></template>'),(r=!t||"object"!=typeof t&&"function"!=typeof t?s(e):t).UTIL.defineProperties({form:{readonly:!0},hoveredIndex:{readonly:!0,get:function(){return r.optionsElement.hoveredIndex}},injected:{private:!0,default:!1},options:{readonly:!0,get:function(){return r.optionsElement.displayOptions}},optionsElement:{readonly:!0,get:function(){return r.querySelector("author-options")}},selectedOptions:{readonly:!0,get:function(){return r.optionsElement?r.optionsElement.selectedOptions:null}},title:{private:!0,default:""},willValidate:{readonly:!0,get:function(){return r.sourceElement.willValidate}},validationMessage:{readonly:!0,get:function(){return r.sourceElement.validationMessage}},validity:{readonly:!0,get:function(){return r.sourceElement.validity}}}),r.UTIL.defineAttributes({name:"",placeholder:"",autofocus:!1,disabled:!1,open:!1,required:!1,size:{get:function(){return r.PRIVATE.throwSizeAttributeWarning()},set:function(){return r.PRIVATE.throwSizeAttributeWarning()}}}),r.UTIL.definePrivateMethods({addOpenListeners:function(){document.addEventListener("mousedown",r.PRIVATE.bodyMousedownHandler),document.addEventListener("touchcancel",r.PRIVATE.bodyMousedownHandler),document.addEventListener("touchend",r.PRIVATE.bodyMousedownHandler)},blurHandler:function(e){return r.off("keydown",r.PRIVATE.keydownHandler)},bodyMousedownHandler:function(e){e.target===s(r)||r.contains(e.target)||(r.open=!1)},focusHandler:function(e){return r.on("keydown",r.PRIVATE.keydownHandler)},keydownHandler:function(e){var t=-1<r.hoveredIndex?r.hoveredIndex:-1<r.selectedIndex?r.selectedIndex:-1;switch(e[r.keySource]){case 27:case"Escape":return r.PRIVATE.clear(),r.close();case 13:case"Enter":case 32:case" ":if(e.preventDefault(),!r.multiple){if(!r.open&&(32===e[r.keySource]||" "===e[r.keySource]))return void(r.open=!0);if(r.hoveredIndex===r.selectedIndex||-1===r.hoveredIndex)return void(r.open=!1);r.selectedIndex=r.hoveredIndex}break;case 38:case"ArrowUp":return e.preventDefault(),r.multiple||r.open?r.emit("keydown.arrowUp",{shiftKey:e.shiftKey,startIndex:t},r.optionsElement):void(r.open=!0);case 40:case"ArrowDown":return e.preventDefault(),r.multiple||r.open?r.emit("keydown.arrowDown",{shiftKey:e.shiftKey,startIndex:t},r.optionsElement):void(r.open=!0);default:return}},optionSelectionHandler:function(e){e.stopPropagation(),r.dispatchEvent(new Event("change",{})),r.open&&r.removeAttribute("open"),r.emit("options.selected",e.detail.options,r.selectedOptionsElement)},removeOpenListeners:function(){document.removeEventListener("mousedown",r.PRIVATE.bodyMousedownHandler),document.removeEventListener("touchcancel",r.PRIVATE.bodyMousedownHandler),document.removeEventListener("touchend",r.PRIVATE.bodyMousedownHandler)},stateChangeHandler:function(e){var t=e.detail,n=t.name,o=t.value;if("multiple"===n&&o&&r.hasAttribute("open")&&r.removeAttribute("open"),"open"===n)return o?r.multiple?r.removeAttribute("open"):(r.optionsElement.unHoverAllOptions(),r.PRIVATE.addOpenListeners()):r.PRIVATE.removeOpenListeners()},throwSizeAttributeWarning:function(){r.UTIL.printToConsole('"size" attribute is not supported. Please use CSS to set the height of the options panel instead.',"warning")},toggleHandler:function(e){return r.open=!r.open}}),r.UTIL.registerListeners(s(r),{"attribute.change":function(e){var t=e.detail,n=t.attribute,o=t.oldValue;if(t.newValue!==o)switch(n){case"open":return r.emit("state.change",{name:"open",value:r.open});case"placeholder":r.selectedOptionsElement&&r.selectedOptionsElement.update();break;case"size":return r.PRIVATE.throwSizeAttributeWarning()}},blur:r.PRIVATE.blurHandler,focus:r.PRIVATE.focusHandler,"options.selected":r.PRIVATE.optionSelectionHandler,"state.change":r.PRIVATE.stateChangeHandler,toggle:r.PRIVATE.toggleHandler,rendered:function(){r.hasAttribute("tabindex")||r.setAttribute("tabindex",0),r.autofocus&&r.focus()}}),r}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,AuthorBaseElement(HTMLElement)),t=o,r=[{key:"observedAttributes",get:function(){return["autofocus","disabled","name","open","placeholder","tabindex","size"]}}],(n=[{key:"add",value:function(e,t){this.optionsElement.addOption(e,t)}},{key:"checkValidity",value:function(){return this.sourceElement.checkValidity()}},{key:"clear",value:function(){this.optionsElement.clear()}},{key:"deselectAll",value:function(){this.optionsElement.deselectAll()}},{key:"inject",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!this.PRIVATE.injected){this.UTIL.defineProperty("sourceElement",{readonly:!0,default:t});var n=document.createElement("author-options");if(n.slot="options",e&&this.UTIL.defineProperty("labels",{private:!0,default:e}),this.appendChild(n),0<t.children.length&&(this.multiple||Array.from(t.children).forEach(function(e){e.index!==t.selectedIndex&&e.removeAttribute("selected")}),this.optionsElement.addOptions(t.children),"select"===t.localName)){var o=document.createElement("author-selected-options");o.slot="selectedoptions",this.appendChild(o),this.multiple||this.selectedOptionsElement.add(this.optionsElement.options[this.selectedIndex])}this.PRIVATE.injected=!0}}},{key:"item",value:function(e){return this.optionsElement.item(e)}},{key:"namedItem",value:function(e){return this.optionsElement.namedItem(e)}},{key:"querySelector",value:function(e){return e.includes(":checked")?0<this.selectedOptions.length?this.selectedOptions[0]:null:a(l(o.prototype),"querySelector",this).call(this,e)}},{key:"querySelectorAll",value:function(e){return e.includes(":checked")?this.optionsElement.querySelectorAll("[selected]"):a(l(o.prototype),"querySelectorAll",this).call(this,e)}},{key:"remove",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return a(l(o.prototype),"remove",this).call(this);this.optionsElement.removeOptionByIndex(e)}},{key:"reportValidity",value:function(){this.sourceElement.checkValidity()?this.removeAttribute("invalid"):this.setAttribute("invalid","")}},{key:"setCustomValidity",value:function(e){this.sourceElement.setCustomValidity(e)}},{key:"length",get:function(){return this.options.length}},{key:"selectedIndex",get:function(){return this.optionsElement?this.optionsElement.selectedIndex:-1},set:function(e){if(e<0)return this.deselectAll();this.optionsElement.selectedIndex=e}},{key:"value",get:function(){if(0===this.selectedOptions.length)return null;var e=this.selectedOptions.item(0);return e?e.value||e.text:null}}])&&i(t.prototype,n),r&&i(t,r),o}();return customElements.define("author-menu",t),t}();
//# sourceMappingURL=author-menu.es5.min.js.map
