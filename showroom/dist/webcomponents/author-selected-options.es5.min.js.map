{"version":3,"file":"author-selected-options.es5.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectedOptionsElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      contentsElement: {\n        readonly: true,\n        private: true,\n        default: this.shadowRoot.getElementById('contents')\n      },\n\n      options: {\n        private: true,\n        default: []\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      appendCaret: () => {\n        let xmlns = 'http://www.w3.org/2000/svg'\n        let width = 24\n        let height = 24\n\n        let caret = document.createElementNS(xmlns, 'svg')\n        caret.slot = 'beforeend'\n        caret.setAttributeNS(null, 'width', width)\n        caret.setAttributeNS(null, 'height', height)\n        caret.setAttributeNS(null, 'viewBox', `0 0 ${width} ${height}`)\n        caret.setAttributeNS(null, 'fill', 'none')\n        caret.setAttributeNS(null, 'stroke', 'currentColor')\n        caret.setAttributeNS(null, 'stroke-width', '3')\n        caret.setAttributeNS(null, 'stroke-linecap', 'square')\n        caret.setAttributeNS(null, 'stroke-linejoin', 'miter')\n\n        let shape = document.createElementNS(xmlns, 'polyline')\n        shape.setAttributeNS(null, 'points', '6 9 12 15 18 9')\n\n        caret.appendChild(shape)\n        this.appendChild(caret)\n      },\n\n      optionSelectionHandler: evt => {\n        evt.stopPropagation()\n\n        this.clear(evt.detail.length === 0)\n        evt.detail.forEach((option, index) => this.add(option, index === evt.detail.length - 1))\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            if (!value) {\n              return this.on('mousedown', this.PRIVATE.mousedownHandler)\n            }\n\n            return this.off('mousedown', this.PRIVATE.mousedownHandler)\n\n          default: return\n        }\n      },\n\n      mousedownHandler: evt => this.emit('toggle', null, this.parentNode)\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.PRIVATE.appendCaret()\n        this.update()\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      disconnected: () => {\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mousedown: this.PRIVATE.mousedownHandler,\n      'options.selected': this.PRIVATE.optionSelectionHandler\n    })\n  }\n\n  get list () {\n    return this.PRIVATE.options.map(option => option.displayElement.text).join(', ')\n  }\n\n  add (option, update = true) {\n    this.PRIVATE.options.push(option)\n    update && this.update()\n  }\n\n  clear (update = true) {\n    this.PRIVATE.options = []\n    update && this.update()\n  }\n\n  remove (option, update = true) {\n    this.PRIVATE.options.splice(this.PRIVATE.options.indexOf(option), 1)\n    update && this.update()\n  }\n\n  update (options = this.PRIVATE.options) {\n    if (options !== this.PRIVATE.options) {\n      this.PRIVATE.options = options\n    }\n\n    this.PRIVATE.contentsElement.innerHTML = options.length > 0\n      ? this.list\n      : this.parentNode.placeholder || ''\n  }\n}\n\ncustomElements.define('author-selected-options', AuthorSelectedOptionsElement)\n\nexport default AuthorSelectedOptionsElement\n"],"names":["AuthorSelectedOptionsElement","super","this","UTIL","defineProperties","contentsElement","readonly","private","default","shadowRoot","getElementById","options","definePrivateMethods","appendCaret","let","xmlns","caret","document","createElementNS","slot","setAttributeNS","shape","appendChild","optionSelectionHandler","evt","stopPropagation","clear","detail","length","forEach","option","index","add","parentStateChangeHandler","name","value","off","PRIVATE","mousedownHandler","on","emit","parentNode","registerListeners","connected","update","disconnected","mousedown","options.selected","prototypeAccessors","list","map","displayElement","text","join","push","remove","splice","indexOf","innerHTML","placeholder","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"uSAAA,IAAMA,cACJ,wBACEC,YAAM,8iBAENC,KAAKC,KAAKC,iBAAiB,CACzBC,gBAAiB,CACfC,UAAU,EACVC,SAAS,EACTC,QAASN,KAAKO,WAAWC,eAAe,aAG1CC,QAAS,CACPJ,SAAS,EACTC,QAAS,MAIbN,KAAKC,KAAKS,qBAAqB,CAC7BC,uBACEC,IAAIC,EAAQ,6BAIRC,EAAQC,SAASC,gBAAgBH,EAAO,OAC5CC,EAAMG,KAAO,YACbH,EAAMI,eAAe,KAAM,QALf,IAMZJ,EAAMI,eAAe,KAAM,SALd,IAMbJ,EAAMI,eAAe,KAAM,uBAC3BJ,EAAMI,eAAe,KAAM,OAAQ,QACnCJ,EAAMI,eAAe,KAAM,SAAU,gBACrCJ,EAAMI,eAAe,KAAM,eAAgB,KAC3CJ,EAAMI,eAAe,KAAM,iBAAkB,UAC7CJ,EAAMI,eAAe,KAAM,kBAAmB,SAE9CN,IAAIO,EAAQJ,SAASC,gBAAgBH,EAAO,YAC5CM,EAAMD,eAAe,KAAM,SAAU,kBAErCJ,EAAMM,YAAYD,GAClBnB,EAAKoB,YAAYN,IAGnBO,gCAAwBC,GACtBA,EAAIC,kBAEJvB,EAAKwB,MAA4B,IAAtBF,EAAIG,OAAOC,QACtBJ,EAAIG,OAAOE,iBAASC,EAAQC,UAAU7B,EAAK8B,IAAIF,EAAQC,IAAUP,EAAIG,OAAOC,OAAS,MAGvFK,kCAA0BT,GACxB,MAAsBA,EAAIG,0BAE1B,OAAQO,GACN,IAAK,WACH,OAAKC,EAIEjC,EAAKkC,IAAI,YAAalC,EAAKmC,QAAQC,kBAHjCpC,EAAKqC,GAAG,YAAarC,EAAKmC,QAAQC,kBAK7C,QAAS,SAIbA,0BAAkBd,UAAOtB,EAAKsC,KAAK,SAAU,KAAMtC,EAAKuC,eAG1DvC,KAAKC,KAAKuC,kBAAkBxC,KAAM,CAChCyC,qBACEzC,EAAKmC,QAAQxB,cACbX,EAAK0C,SACL1C,EAAKuC,WAAWF,GAAG,eAAgBrC,EAAKmC,QAAQJ,2BAGlDY,wBACE3C,EAAKuC,WAAWL,IAAI,eAAgBlC,EAAKmC,QAAQJ,2BAGnDa,UAAW5C,KAAKmC,QAAQC,iBACxBS,mBAAoB7C,KAAKmC,QAAQd,4IAIrCyB,EAAIC,oBACF,OAAO/C,KAAKmC,QAAQ1B,QAAQuC,aAAIpB,UAAUA,EAAOqB,eAAeC,OAAMC,KAAK,mBAG7ErB,aAAKF,EAAQc,mBAAS,GACpB1C,KAAKmC,QAAQ1B,QAAQ2C,KAAKxB,GAC1Bc,GAAU1C,KAAK0C,sBAGjBlB,eAAOkB,mBAAS,GACd1C,KAAKmC,QAAQ1B,QAAU,GACvBiC,GAAU1C,KAAK0C,sBAGjBW,gBAAQzB,EAAQc,mBAAS,GACvB1C,KAAKmC,QAAQ1B,QAAQ6C,OAAOtD,KAAKmC,QAAQ1B,QAAQ8C,QAAQ3B,GAAS,GAClEc,GAAU1C,KAAK0C,sBAGjBA,gBAAQjC,kBAAUT,KAAKmC,QAAQ1B,SACzBA,IAAYT,KAAKmC,QAAQ1B,UAC3BT,KAAKmC,QAAQ1B,QAAUA,GAGzBT,KAAKmC,QAAQhC,gBAAgBqD,UAA6B,EAAjB/C,EAAQiB,OAC7C1B,KAAK+C,KACL/C,KAAKuC,WAAWkB,aAAe,8CA5GIC,kBAAkBC,qBAgH7DC,eAAeC,OAAO,0BAA2B/D"}