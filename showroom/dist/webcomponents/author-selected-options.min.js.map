{"version":3,"file":"author-selected-options.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectedOptionsElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      contentsElement: {\n        readonly: true,\n        private: true,\n        default: this.shadowRoot.getElementById('contents')\n      },\n\n      options: {\n        private: true,\n        default: []\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      appendCaret: () => {\n        let xmlns = 'http://www.w3.org/2000/svg'\n        let width = 24\n        let height = 24\n\n        let caret = document.createElementNS(xmlns, 'svg')\n        caret.slot = 'beforeend'\n        caret.setAttributeNS(null, 'width', width)\n        caret.setAttributeNS(null, 'height', height)\n        caret.setAttributeNS(null, 'viewBox', `0 0 ${width} ${height}`)\n        caret.setAttributeNS(null, 'fill', 'none')\n        caret.setAttributeNS(null, 'stroke', 'currentColor')\n        caret.setAttributeNS(null, 'stroke-width', '3')\n        caret.setAttributeNS(null, 'stroke-linecap', 'square')\n        caret.setAttributeNS(null, 'stroke-linejoin', 'miter')\n\n        let shape = document.createElementNS(xmlns, 'polyline')\n        shape.setAttributeNS(null, 'points', '6 9 12 15 18 9')\n\n        caret.appendChild(shape)\n        this.appendChild(caret)\n      },\n\n      optionSelectionHandler: evt => {\n        evt.stopPropagation()\n\n        this.clear(evt.detail.length === 0)\n        evt.detail.forEach((option, index) => this.add(option, index === evt.detail.length - 1))\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            if (!value) {\n              return this.on('mousedown', this.PRIVATE.mousedownHandler)\n            }\n\n            return this.off('mousedown', this.PRIVATE.mousedownHandler)\n\n          default: return\n        }\n      },\n\n      mousedownHandler: evt => this.emit('toggle', null, this.parentNode)\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.PRIVATE.appendCaret()\n        this.update()\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      disconnected: () => {\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mousedown: this.PRIVATE.mousedownHandler,\n      'options.selected': this.PRIVATE.optionSelectionHandler\n    })\n  }\n\n  get list () {\n    return this.PRIVATE.options.map(option => option.displayElement.text).join(', ')\n  }\n\n  add (option, update = true) {\n    this.PRIVATE.options.push(option)\n    update && this.update()\n  }\n\n  clear (update = true) {\n    this.PRIVATE.options = []\n    update && this.update()\n  }\n\n  remove (option, update = true) {\n    this.PRIVATE.options.splice(this.PRIVATE.options.indexOf(option), 1)\n    update && this.update()\n  }\n\n  update (options = this.PRIVATE.options) {\n    if (options !== this.PRIVATE.options) {\n      this.PRIVATE.options = options\n    }\n\n    this.PRIVATE.contentsElement.innerHTML = options.length > 0\n      ? this.list\n      : this.parentNode.placeholder || ''\n  }\n}\n\ncustomElements.define('author-selected-options', AuthorSelectedOptionsElement)\n\nexport default AuthorSelectedOptionsElement\n"],"names":["AuthorSelectedOptionsElement","AuthorBaseElement","HTMLElement","[object Object]","super","this","UTIL","defineProperties","contentsElement","readonly","private","default","shadowRoot","getElementById","options","definePrivateMethods","appendCaret","xmlns","caret","document","createElementNS","slot","setAttributeNS","shape","appendChild","optionSelectionHandler","evt","stopPropagation","clear","detail","length","forEach","option","index","add","parentStateChangeHandler","name","value","off","PRIVATE","mousedownHandler","on","emit","parentNode","registerListeners","connected","update","disconnected","mousedown","options.selected","list","map","displayElement","text","join","push","splice","indexOf","innerHTML","placeholder","customElements","define"],"mappings":"uSAAA,MAAMA,UAAqCC,kBAAkBC,cAC3DC,cACEC,MAAM,8iBAENC,KAAKC,KAAKC,iBAAiB,CACzBC,gBAAiB,CACfC,UAAU,EACVC,SAAS,EACTC,QAASN,KAAKO,WAAWC,eAAe,aAG1CC,QAAS,CACPJ,SAAS,EACTC,QAAS,MAIbN,KAAKC,KAAKS,qBAAqB,CAC7BC,YAAa,KACX,IAAIC,EAAQ,6BAIRC,EAAQC,SAASC,gBAAgBH,EAAO,OAC5CC,EAAMG,KAAO,YACbH,EAAMI,eAAe,KAAM,QALf,IAMZJ,EAAMI,eAAe,KAAM,SALd,IAMbJ,EAAMI,eAAe,KAAM,UAAW,aACtCJ,EAAMI,eAAe,KAAM,OAAQ,QACnCJ,EAAMI,eAAe,KAAM,SAAU,gBACrCJ,EAAMI,eAAe,KAAM,eAAgB,KAC3CJ,EAAMI,eAAe,KAAM,iBAAkB,UAC7CJ,EAAMI,eAAe,KAAM,kBAAmB,SAE9C,IAAIC,EAAQJ,SAASC,gBAAgBH,EAAO,YAC5CM,EAAMD,eAAe,KAAM,SAAU,kBAErCJ,EAAMM,YAAYD,GAClBlB,KAAKmB,YAAYN,IAGnBO,uBAAwBC,IACtBA,EAAIC,kBAEJtB,KAAKuB,MAA4B,IAAtBF,EAAIG,OAAOC,QACtBJ,EAAIG,OAAOE,QAAQ,CAACC,EAAQC,IAAU5B,KAAK6B,IAAIF,EAAQC,IAAUP,EAAIG,OAAOC,OAAS,KAGvFK,yBAA0BT,IACxB,IAAIU,KAAEA,EAAIC,MAAEA,GAAUX,EAAIG,OAE1B,OAAQO,GACN,IAAK,WACH,OAAKC,EAIEhC,KAAKiC,IAAI,YAAajC,KAAKkC,QAAQC,kBAHjCnC,KAAKoC,GAAG,YAAapC,KAAKkC,QAAQC,kBAK7C,QAAS,SAIbA,iBAAkBd,GAAOrB,KAAKqC,KAAK,SAAU,KAAMrC,KAAKsC,cAG1DtC,KAAKC,KAAKsC,kBAAkBvC,KAAM,CAChCwC,UAAW,KACTxC,KAAKkC,QAAQvB,cACbX,KAAKyC,SACLzC,KAAKsC,WAAWF,GAAG,eAAgBpC,KAAKkC,QAAQJ,2BAGlDY,aAAc,KACZ1C,KAAKsC,WAAWL,IAAI,eAAgBjC,KAAKkC,QAAQJ,2BAGnDa,UAAW3C,KAAKkC,QAAQC,iBACxBS,mBAAoB5C,KAAKkC,QAAQd,yBAIrCyB,WACE,OAAO7C,KAAKkC,QAAQzB,QAAQqC,IAAInB,GAAUA,EAAOoB,eAAeC,MAAMC,KAAK,MAG7EnD,IAAK6B,EAAQc,GAAS,GACpBzC,KAAKkC,QAAQzB,QAAQyC,KAAKvB,GAC1Bc,GAAUzC,KAAKyC,SAGjB3C,MAAO2C,GAAS,GACdzC,KAAKkC,QAAQzB,QAAU,GACvBgC,GAAUzC,KAAKyC,SAGjB3C,OAAQ6B,EAAQc,GAAS,GACvBzC,KAAKkC,QAAQzB,QAAQ0C,OAAOnD,KAAKkC,QAAQzB,QAAQ2C,QAAQzB,GAAS,GAClEc,GAAUzC,KAAKyC,SAGjB3C,OAAQW,EAAUT,KAAKkC,QAAQzB,SACzBA,IAAYT,KAAKkC,QAAQzB,UAC3BT,KAAKkC,QAAQzB,QAAUA,GAGzBT,KAAKkC,QAAQ/B,gBAAgBkD,UAAY5C,EAAQgB,OAAS,EACtDzB,KAAK6C,KACL7C,KAAKsC,WAAWgB,aAAe,WAIvCC,eAAeC,OAAO,0BAA2B7D"}