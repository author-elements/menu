var AuthorSelectElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-select> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),function(){let e=Array.from(new Set(["author-selected-options","author-options","author-option","author-optgroup","author-optgroup-label"])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <author-select> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/select".replace("select",e.replace("author-",""))}`)))}();class e extends(AuthorBaseElement(HTMLElement)){constructor(){super('<template><style>@charset "UTF-8"; :host{display:inline-block;max-width:100%}:host *,:host :after,:host :before{box-sizing:border-box}author-select{display:inline-block;max-width:100%}author-select *,author-select :after,author-select :before{box-sizing:border-box}</style><slot name="afterbegin"></slot><slot name="beforeselectedoptions"></slot><slot name="selectedoptions"></slot><slot name="afterselectedoptions"></slot><slot name="beforeoptions"></slot><slot name="options"></slot><slot name="afteroptions"></slot><slot name="beforeend"></slot></template>'),this.UTIL.defineProperties({form:{readonly:!0},hoveredIndex:{readonly:!0,get:()=>this.optionsElement.hoveredIndex},injected:{private:!0,default:!1},labels:{private:!0},middleware:{private:!0,default:{beforeChange:null,afterChange:null}},options:{readonly:!0,get:()=>this.optionsElement.displayOptions},optionsElement:{readonly:!0,get:()=>this.querySelector("author-options")},selectedOptions:{readonly:!0,get:()=>this.optionsElement?this.optionsElement.selectedOptions:null},selectedOptionsElement:{readonly:!0,get:()=>this.querySelector("author-selected-options")},title:{private:!0,default:""},type:{readonly:!0,get:()=>this.multiple?"select-multiple":"select-one"},willValidate:{readonly:!0,get:()=>this.sourceElement.willValidate},validationMessage:{readonly:!0,get:()=>this.sourceElement.validationMessage},validity:{readonly:!0,get:()=>this.sourceElement.validity}}),this.UTIL.defineAttributes({name:"",placeholder:"",autofocus:!1,disabled:!1,multiple:!1,open:!1,required:!1,size:{get:()=>this.PRIVATE.throwSizeAttributeWarning(),set:()=>this.PRIVATE.throwSizeAttributeWarning()}}),this.UTIL.definePrivateMethods({addOpenListeners:()=>{document.addEventListener("mousedown",this.PRIVATE.bodyMousedownHandler),document.addEventListener("touchcancel",this.PRIVATE.bodyMousedownHandler),document.addEventListener("touchend",this.PRIVATE.bodyMousedownHandler)},blurHandler:e=>this.off("keydown",this.PRIVATE.keydownHandler),bodyMousedownHandler:e=>{e.target===this||this.contains(e.target)||(this.open=!1)},focusHandler:e=>this.on("keydown",this.PRIVATE.keydownHandler),keydownHandler:e=>{let t=this.hoveredIndex>-1?this.hoveredIndex:this.selectedIndex>-1?this.selectedIndex:-1;switch(e[this.keySource]){case 13:case"Enter":case 32:case" ":if(e.preventDefault(),!this.multiple){if(!this.open&&(32===e[this.keySource]||" "===e[this.keySource]))return void(this.open=!0);if(this.hoveredIndex===this.selectedIndex||-1===this.hoveredIndex)return void(this.open=!1);this.selectedIndex=this.hoveredIndex}break;case 38:case"ArrowUp":return e.preventDefault(),this.multiple||this.open?this.emit("keydown.arrowUp",{shiftKey:e.shiftKey,startIndex:t},this.optionsElement):void(this.open=!0);case 40:case"ArrowDown":return e.preventDefault(),this.multiple||this.open?this.emit("keydown.arrowDown",{shiftKey:e.shiftKey,startIndex:t},this.optionsElement):void(this.open=!0);default:return}},optionSelectionHandler:e=>{e.stopPropagation();let{afterChange:t}=this.PRIVATE.middleware;this.dispatchEvent(new Event("change",{})),this.open&&this.removeAttribute("open"),this.emit("options.selected",e.detail.options,this.selectedOptionsElement),t&&"function"==typeof t&&t(e.detail.previous,this.selectedOptions)},removeOpenListeners:()=>{document.removeEventListener("mousedown",this.PRIVATE.bodyMousedownHandler),document.removeEventListener("touchcancel",this.PRIVATE.bodyMousedownHandler),document.removeEventListener("touchend",this.PRIVATE.bodyMousedownHandler)},stateChangeHandler:e=>{let{name:t,value:s}=e.detail;switch(t){case"open":return s?this.multiple?this.removeAttribute("open"):(this.optionsElement.unHoverAllOptions(),this.PRIVATE.addOpenListeners()):this.PRIVATE.removeOpenListeners();case"multiple":s&&this.hasAttribute("open")&&this.removeAttribute("open");break;default:return}},throwSizeAttributeWarning:()=>{this.UTIL.printToConsole('"size" attribute is not supported. Please use CSS to set the height of the options panel instead.',"warning")},toggleHandler:e=>this.open=!this.open}),this.UTIL.registerListeners(this,{"attribute.change":e=>{let{attribute:t,oldValue:s,newValue:n}=e.detail;if(n!==s)switch(t){case"multiple":return this.emit("state.change",{name:"multiple",value:this.multiple});case"open":return this.emit("state.change",{name:"open",value:this.open});case"placeholder":this.selectedOptionsElement&&this.selectedOptionsElement.update();break;case"size":return this.PRIVATE.throwSizeAttributeWarning();default:return}},blur:this.PRIVATE.blurHandler,focus:this.PRIVATE.focusHandler,"options.selected":this.PRIVATE.optionSelectionHandler,"state.change":this.PRIVATE.stateChangeHandler,toggle:this.PRIVATE.toggleHandler,rendered:()=>{this.hasAttribute("tabindex")||this.setAttribute("tabindex",0),this.autofocus&&this.focus()}})}static get observedAttributes(){return["autofocus","disabled","multiple","name","open","placeholder","tabindex","size"]}get afterChange(){return this.PRIVATE.middleware.afterChange}set afterChange(e){this.PRIVATE.middleware.afterChange=e.bind(this)}get beforeChange(){return this.PRIVATE.middleware.beforeChange}set beforeChange(e){this.PRIVATE.middleware.beforeChange=e.bind(this)}get length(){return this.options.length}get selectedIndex(){return this.optionsElement?this.optionsElement.selectedIndex:-1}set selectedIndex(e){if(e<0)return this.deselectAll();this.optionsElement.selectedIndex=e}get value(){if(0===this.selectedOptions.length)return null;let e=this.selectedOptions.item(0);return e?e.value||e.text:null}add(e,t){this.optionsElement.addOption(e,t)}checkValidity(){return this.sourceElement.checkValidity()}clear(){this.optionsElement.clear(),this.selectedOptionsElement.clear()}deselectAll(){this.optionsElement.deselectAll()}inject(e,t){if(this.PRIVATE.injected)return;this.UTIL.defineProperty("sourceElement",{readonly:!0,default:e});let s=document.createElement("author-selected-options");s.slot="selectedoptions";let n=document.createElement("author-options");n.slot="options",this.PRIVATE.labels=t,this.appendChild(s),this.appendChild(n),e.children.length>0&&(this.multiple||Array.from(e.children).forEach(t=>{t.index!==e.selectedIndex&&t.removeAttribute("selected")}),this.optionsElement.addOptions(e.children),this.multiple||this.selectedOptionsElement.add(this.optionsElement.options[this.selectedIndex])),this.PRIVATE.injected=!0}item(e){return this.optionsElement.item(e)}namedItem(e){return this.optionsElement.namedItem(e)}querySelector(e){return":checked"!==e?super.querySelector(e):this.selectedOptions.length>0?this.selectedOptions[0]:null}querySelectorAll(e){return":checked"!==e?super.querySelectorAll(e):this.optionsElement.querySelectorAll("[selected]")}remove(e=null){if(null===e)return super.remove();this.optionsElement.removeOptionByIndex(e)}reportValidity(){this.sourceElement.checkValidity()?this.removeAttribute("invalid"):this.setAttribute("invalid","")}setCustomValidity(e){this.sourceElement.setCustomValidity(e)}}return customElements.define("author-select",e),e}();
//# sourceMappingURL=author-select.min.js.map
